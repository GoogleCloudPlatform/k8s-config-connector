// Copyright 2025 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

package v1alpha1


// +kcc:proto=google.cloud.video.stitcher.v1.LiveSession
type LiveSession struct {

	// Key value pairs for ad tag macro replacement, only available for live
	//  sessions that do not implement Google Ad manager ad insertion. If the
	//  specified ad tag URI has macros, this field provides the mapping to the
	//  value that will replace the macro in the ad tag URI.
	//
	//  Macros are designated by square brackets, for example:
	//
	//    Ad tag URI: "https://doubleclick.google.com/ad/1?geo_id=[geoId]"
	//
	//    Ad tag macros: `{"geoId": "123"}`
	//
	//    Fully qualified ad tag:
	//    `"https://doubleclick.google.com/ad/1?geo_id=123"`
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.ad_tag_macros
	AdTagMacros map[string]string `json:"adTagMacros,omitempty"`

	// Additional options that affect the output of the manifest.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.manifest_options
	ManifestOptions *ManifestOptions `json:"manifestOptions,omitempty"`

	// This field should be set with appropriate values if GAM is being used for
	//  ads.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.gam_settings
	GamSettings *LiveSession_GamSettings `json:"gamSettings,omitempty"`

	// Required. The resource name of the live config for this session, in the
	//  form of `projects/{project}/locations/{location}/liveConfigs/{id}`.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.live_config
	LiveConfig *string `json:"liveConfig,omitempty"`

	// Determines how the ad should be tracked. This overrides the value set in
	//  the live config for this session.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.ad_tracking
	AdTracking *string `json:"adTracking,omitempty"`
}

// +kcc:proto=google.cloud.video.stitcher.v1.LiveSession.GamSettings
type LiveSession_GamSettings struct {
	// Required. The stream ID generated by Ad Manager. This must be set if GAM
	//  is being used for ads and the session uses client-side ad tracking.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.GamSettings.stream_id
	StreamID *string `json:"streamID,omitempty"`

	// [Targeting
	//  parameters](https://support.google.com/admanager/answer/7320899) to send
	//  to Ad Manager to generate a stream ID. This should only be set if the
	//  session uses server-side ad tracking.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.GamSettings.targeting_parameters
	TargetingParameters map[string]string `json:"targetingParameters,omitempty"`
}

// +kcc:proto=google.cloud.video.stitcher.v1.ManifestOptions
type ManifestOptions struct {
	// If specified, the output manifest will only return renditions matching the
	//  specified filters.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.ManifestOptions.include_renditions
	IncludeRenditions []RenditionFilter `json:"includeRenditions,omitempty"`

	// If specified, the output manifest will orders the video and muxed
	//  renditions by bitrate according to the ordering policy.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.ManifestOptions.bitrate_order
	BitrateOrder *string `json:"bitrateOrder,omitempty"`
}

// +kcc:proto=google.cloud.video.stitcher.v1.RenditionFilter
type RenditionFilter struct {
	// Bitrate in bits per second for the rendition. If set, only renditions with
	//  the exact bitrate will match.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.RenditionFilter.bitrate_bps
	BitrateBps *int32 `json:"bitrateBps,omitempty"`

	// Codecs for the rendition. If set, only renditions with the exact value
	//  will match.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.RenditionFilter.codecs
	Codecs *string `json:"codecs,omitempty"`
}

// +kcc:proto=google.cloud.video.stitcher.v1.LiveSession
type LiveSessionObservedState struct {
	// Output only. The name of the live session, in the form of
	//  `projects/{project}/locations/{location}/liveSessions/{id}`.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.name
	Name *string `json:"name,omitempty"`

	// Output only. The URI to play the live session's ad-stitched stream.
	// +kcc:proto:field=google.cloud.video.stitcher.v1.LiveSession.play_uri
	PlayURI *string `json:"playURI,omitempty"`
}
