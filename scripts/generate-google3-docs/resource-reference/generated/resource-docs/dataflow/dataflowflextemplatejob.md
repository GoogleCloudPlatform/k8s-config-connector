{# AUTOGENERATED. DO NOT EDIT. #}

{% extends "config-connector/_base.html" %}


{% block page_title %}DataflowFlexTemplateJob{% endblock %}
{% block body %}



Note: DataflowFlexTemplateJob resources  cannot be updated.

<table>
<thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>{{gcp_name_short}} Service Name</td>
<td>Cloud Dataflow</td>
</tr>
<tr>
<td>{{gcp_name_short}} Service Documentation</td>
<td><a href="/dataflow/docs/">/dataflow/docs/</a></td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Name</td>
<td>v1b3.projects.jobs</td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Documentation</td>
<td><a href="/dataflow/docs/reference/rest/v1b3/projects.jobs">/dataflow/docs/reference/rest/v1b3/projects.jobs</a></td>
</tr>
<tr>
<td>{{product_name_short}} Resource Short Names</td>
<td>gcpdataflowflextemplatejob<br>gcpdataflowflextemplatejobs<br>dataflowflextemplatejob</td>
</tr>
<tr>
<td>{{product_name_short}} Service Name</td>
<td>dataflow.googleapis.com</td>
</tr>
<tr>
<td>{{product_name_short}} Resource Fully Qualified Name</td>
<td>dataflowflextemplatejobs.dataflow.cnrm.cloud.google.com</td>
</tr>

<tr>
    <td>Can Be Referenced by IAMPolicy/IAMPolicyMember</td>
    <td>No</td>
</tr>


<tr>
<td>{{product_name_short}} Default Average Reconcile Interval In Seconds</td>
<td>600</td>
</tr>
</tbody>
</table>

## Custom Resource Definition Properties


### Annotations
<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>cnrm.cloud.google.com/on-delete</code></td>
    </tr>
    <tr>
        <td><code>cnrm.cloud.google.com/project-id</code></td>
    </tr>
    <tr>
        <td><code>cnrm.cloud.google.com/skip-wait-on-job-termination</code></td>
    </tr>
</tbody>
</table>


### Spec
#### Schema
```yaml
additionalExperiments:
- string
autoscalingAlgorithm: string
containerSpecGcsPath: string
enableStreamingEngine: boolean
ipConfiguration: string
kmsKeyNameRef:
  external: string
  name: string
  namespace: string
launcherMachineType: string
machineType: string
maxWorkers: integer
networkRef:
  external: string
  name: string
  namespace: string
numWorkers: integer
parameters: {}
region: string
sdkContainerImage: string
serviceAccountEmailRef:
  external: string
  name: string
  namespace: string
stagingLocation: string
subnetworkRef:
  external: string
  name: string
  namespace: string
tempLocation: string
transformNameMapping: {}
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            <p><code>additionalExperiments</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">list (string)</code></p>
            <p>{% verbatim %}Additional experiment flags for the job.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>additionalExperiments[]</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>autoscalingAlgorithm</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The algorithm to use for autoscaling{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>containerSpecGcsPath</code></p>
            <p><i>Required</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Cloud Storage path to a file with json serialized ContainerSpec as content.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>enableStreamingEngine</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">boolean</code></p>
            <p>{% verbatim %}Whether to enable Streaming Engine for the job.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>ipConfiguration</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Configuration for VM IPs.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>kmsKeyNameRef</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}The Cloud KMS key for the job.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>kmsKeyNameRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}A reference to an externally managed KMSCryptoKey. Should be in the format `projects/[kms_project_id]/locations/[region]/keyRings/[key_ring_id]/cryptoKeys/[key]`.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>kmsKeyNameRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The `name` of a `KMSCryptoKey` resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>kmsKeyNameRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The `namespace` of a `KMSCryptoKey` resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>launcherMachineType</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The machine type to use for launching the job. The default is n1-standard-1.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>machineType</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The machine type to use for the job. Defaults to the value from the template if not specified.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>maxWorkers</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}The maximum number of Google Compute Engine instances to be made available to your pipeline during execution, from 1 to 1000.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkRef</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Network to which VMs will be assigned.  If empty or unspecified, the service will use the network "default".{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The value of an externally managed ComputeNetwork resource. Should be in the format "projects/{{projectID}}/global/networks/{{network}}".{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The name of a ComputeNetwork resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The namespace of a ComputeNetwork resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>numWorkers</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}The initial number of Google Compute Engine instances for the job.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>parameters</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}The parameters for FlexTemplate. Ex. {"num_workers":"5"}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>region</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. The region in which the created job should run.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>sdkContainerImage</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Docker registry location of container image to use for the 'worker harness. Default is the container for the version of the SDK. Note this field is only valid for portable pipelines.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountEmailRef</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}The email address of the service account to run the job as.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountEmailRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The `email` field of an `IAMServiceAccount` resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountEmailRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountEmailRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>stagingLocation</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The Cloud Storage path for staging local files. Must be a valid Cloud Storage URL, beginning with `gs://`.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>subnetworkRef</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Subnetwork to which VMs will be assigned, if desired. You can specify a subnetwork using either a complete URL or an abbreviated path. Expected to be of the form "https://www.googleapis.com/compute/v1/projects/HOST_PROJECT_ID/regions/REGION/subnetworks/SUBNETWORK" or "regions/REGION/subnetworks/SUBNETWORK". If the subnetwork is located in a Shared VPC network, you must use the complete URL.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>subnetworkRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The value of an externally managed ComputeSubnetwork resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>subnetworkRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The name of a ComputeSubnetwork resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>subnetworkRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The namespace of a ComputeSubnetwork resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>tempLocation</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The Cloud Storage path to use for temporary files. Must be a valid Cloud Storage URL, beginning with `gs://`.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>transformNameMapping</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Map of transform name prefixes of the job to be replaced with the corresponding name prefixes of the new job. Only applicable when updating a pipeline.{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>



### Status
#### Schema
```yaml
conditions:
- lastTransitionTime: string
  message: string
  reason: string
  status: string
  type: string
jobId: string
observedGeneration: integer
state: string
type: string
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>conditions</code></td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}Conditions represent the latest available observations of the object's current state.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[]</code></td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].lastTransitionTime</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Last time the condition transitioned from one status to another.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].message</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Human-readable message indicating details about last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].reason</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Unique, one-word, CamelCase reason for the condition's last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].status</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Status is the status of the condition. Can be True, False, Unknown.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].type</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Type is the type of the condition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>jobId</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>observedGeneration</code></td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>state</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The current state of the job.

 Jobs are created in the `JOB_STATE_STOPPED` state unless otherwise
 specified.

 A job in the `JOB_STATE_RUNNING` state may asynchronously enter a
 terminal state. After a job has reached a terminal state, no
 further state updates may be made.

 This field may be mutated by the Cloud Dataflow service;
 callers cannot mutate it.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>type</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The type of Cloud Dataflow job.{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>

## Sample YAML(s)

### Batch Dataflow Flex Template Job
```yaml
# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: dataflow.cnrm.cloud.google.com/v1beta1
kind: DataflowFlexTemplateJob
metadata:
  annotations:
    cnrm.cloud.google.com/on-delete: "cancel"
  name: dataflowflextemplatejob-sample-batch
spec:
  region: us-central1
  # This is a public, Google-maintained Dataflow Job flex template of a batch job
  containerSpecGcsPath: gs://dataflow-templates/2022-10-03-00_RC00/flex/File_Format_Conversion
  parameters:
    inputFileFormat: csv
    outputFileFormat: avro
    # This is a public, Google-maintained csv file expressly for this sample.
    inputFileSpec: gs://config-connector-samples/dataflowflextemplate/numbertest.csv
    # Replace ${PROJECT_ID?} with your project ID.
    outputBucket: gs://${PROJECT_ID?}-dataflowflextemplatejob-dep-batch
    # This is a public, Google-maintained Avro schema file expressly for this sample.
    schema: gs://config-connector-samples/dataflowflextemplate/numbers.avsc
---
apiVersion: storage.cnrm.cloud.google.com/v1beta1
kind: StorageBucket
metadata:
  # StorageBucket names must be globally unique. Replace ${PROJECT_ID?} with your project ID.
  name: ${PROJECT_ID?}-dataflowflextemplatejob-dep-batch
```

### Streaming Dataflow Flex Template Job
```yaml
# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: dataflow.cnrm.cloud.google.com/v1beta1
kind: DataflowFlexTemplateJob
metadata:
  annotations:
    cnrm.cloud.google.com/on-delete: "drain"
  name: dataflowflextemplatejob-sample-streaming
spec:
  region: us-central1
  # This is a public, Google-maintained Dataflow Job flex template of a streaming job
  containerSpecGcsPath: gs://dataflow-templates/2020-08-31-00_RC00/flex/PubSub_Avro_to_BigQuery
  parameters:
    # This is a public, Google-maintained Avro schema file expressly for this sample.
    schemaPath: gs://config-connector-samples/dataflowflextemplate/numbers.avsc
    # Replace ${PROJECT_ID?} with your project ID.
    inputSubscription: projects/${PROJECT_ID?}/subscriptions/dataflowflextemplatejob-dep-streaming
    outputTopic: projects/${PROJECT_ID?}/topics/dataflowflextemplatejob-dep1-streaming
    outputTableSpec: ${PROJECT_ID?}:dataflowflextemplatejobdepstreaming.dataflowflextemplatejobdepstreaming
    createDisposition: CREATE_NEVER
---
apiVersion: bigquery.cnrm.cloud.google.com/v1beta1
kind: BigQueryDataset
metadata:
  name: dataflowflextemplatejobdepstreaming
spec:
  location: us-central1
---
apiVersion: bigquery.cnrm.cloud.google.com/v1beta1
kind: BigQueryTable
metadata:
  name: dataflowflextemplatejobdepstreaming
spec:
  datasetRef:
    name: dataflowflextemplatejobdepstreaming
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubSubscription
metadata:
  name: dataflowflextemplatejob-dep-streaming
spec:
  topicRef:
    name: dataflowflextemplatejob-dep0-streaming
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubTopic
metadata:
  name: dataflowflextemplatejob-dep0-streaming
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubTopic
metadata:
  name: dataflowflextemplatejob-dep1-streaming
```


Note: If you have any trouble with instantiating the resource, refer to <a href="/config-connector/docs/troubleshooting">Troubleshoot Config Connector</a>.

{% endblock %}