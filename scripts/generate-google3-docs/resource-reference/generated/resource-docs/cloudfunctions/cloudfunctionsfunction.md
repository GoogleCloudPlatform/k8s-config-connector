{# AUTOGENERATED. DO NOT EDIT. #}

{% extends "config-connector/_base.html" %}

{% block page_title %}CloudFunctionsFunction{% endblock %}
{% block body %}


<table>
<thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>{{gcp_name_short}} Service Name</td>
<td>Cloud Functions</td>
</tr>
<tr>
<td>{{gcp_name_short}} Service Documentation</td>
<td><a href="/functions/docs/">/functions/docs/</a></td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Name</td>
<td>v1.projects.locations.functions</td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Documentation</td>
<td><a href="/functions/docs/reference/rest/v1/projects.locations.functions">/functions/docs/reference/rest/v1/projects.locations.functions</a></td>
</tr>
<tr>
<td>{{product_name_short}} Resource Short Names</td>
<td>CloudFunctionsFunction<br>gcpcloudfunctionsfunction<br>gcpcloudfunctionsfunctions<br>cloudfunctionsfunction</td>
</tr>
<tr>
<td>{{product_name_short}} Service Name</td>
<td>cloudfunctions.googleapis.com</td>
</tr>
<tr>
<td>{{product_name_short}} Resource Fully Qualified Name</td>
<td>cloudfunctionsfunctions.cloudfunctions.cnrm.cloud.google.com</td>
</tr>

<tr>
    <td>Can Be Referenced by IAMPolicy/IAMPolicyMember</td>
    <td>Yes</td>
</tr>

<tr>
    <td>IAMPolicy/IAMPartialPolicy Supports Conditions</td>
    <td>Yes</td>
</tr>
<tr>
    <td>IAMPolicyMember Supports Conditions</td>
    <td>No</td>
</tr>

<tr>
    <td>Supports IAM Audit Configs</td>
    <td>No</td>
</tr>
<tr>
    <td>IAM External Reference Format</td>
    <td>
        
        <p>{% verbatim %}projects/{{project}}/locations/{{region}}/functions/{{name}}{% endverbatim %}</p>
        
    </td>
</tr>


<tr>
<td>{{product_name_short}} Default Average Reconcile Interval In Seconds</td>
<td>600</td>
</tr>
</tbody>
</table>

## Custom Resource Definition Properties



### Spec
#### Schema
```yaml
availableMemoryMb: integer
description: string
entryPoint: string
environmentVariables:
  string: string
eventTrigger:
  eventType: string
  failurePolicy: boolean
  resourceRef:
    external: string
    kind: string
    name: string
    namespace: string
  service: string
httpsTrigger:
  securityLevel: string
ingressSettings: string
maxInstances: integer
projectRef:
  external: string
  name: string
  namespace: string
region: string
resourceID: string
runtime: string
serviceAccountRef:
  external: string
  name: string
  namespace: string
sourceArchiveUrl: string
sourceRepository:
  url: string
timeout: string
vpcConnectorEgressSettings: string
vpcConnectorRef:
  external: string
  name: string
  namespace: string
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            <p><code>availableMemoryMb</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}Memory (in MB), available to the function. Default value is 256MB. Allowed values are: 128MB, 256MB, 512MB, 1024MB, and 2048MB.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>description</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}User-provided description of a function.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>entryPoint</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. The name of the function (as defined in source code) that will be
executed. Defaults to the resource name suffix, if not specified. For
backward compatibility, if function with given name is not found, then the
system will try to use function named "function".
For Node.js this is name of a function exported by the module specified
in `source_location`.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>environmentVariables</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">map (key: string, value: string)</code></p>
            <p>{% verbatim %}Environment variables that shall be available during function execution.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Immutable. A source that fires events in response to a condition in another service.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.eventType</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. Required. The type of event to observe. For example:
`providers/cloud.storage/eventTypes/object.change` and
`providers/cloud.pubsub/eventTypes/topic.publish`.

Event types match pattern `providers/*/eventTypes/*.*`.
The pattern contains:

1. namespace: For example, `cloud.storage` and
   `google.firebase.analytics`.
2. resource type: The type of resource on which event occurs. For
   example, the Google Cloud Storage API includes the type `object`.
3. action: The action that generates the event. For example, action for
   a Google Cloud Storage Object is 'change'.
These parts are lower case.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.failurePolicy</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">boolean</code></p>
            <p>{% verbatim %}Immutable. Specifies policy for failed executions.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.resourceRef</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Immutable.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.resourceRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Required. The resource(s) from which to observe events, for example,
`projects/_/buckets/myBucket`.

Not all syntactically correct values are accepted by all services. For
example:

1. The authorization model must support it. Google Cloud Functions
   only allows EventTriggers to be deployed that observe resources in the
   same project as the `Function`.
2. The resource type must match the pattern expected for an
   `event_type`. For example, an `EventTrigger` that has an
   `event_type` of "google.pubsub.topic.publish" should have a resource
   that matches Google Cloud Pub/Sub topics.

Additionally, some services may support short names when creating an
`EventTrigger`. These will always be returned in the normalized "long"
format.

See each *service's* documentation for supported formats.

Allowed values:
* The Google Cloud resource name of a `StorageBucket` resource (format: `{{name}}`).
* The Google Cloud resource name of a `PubSubTopic` resource (format: `projects/{{project}}/topics/{{name}}`).{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.resourceRef.kind</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Kind of the referent. Allowed values: StorageBucket,PubSubTopic{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.resourceRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.resourceRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>eventTrigger.service</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. The hostname of the service that should be observed.

If no string is provided, the default service implementing the API will
be used. For example, `storage.googleapis.com` is the default for all
event types in the `google.storage` namespace.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>httpsTrigger</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Immutable. An HTTPS endpoint type of source that can be triggered via URL.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>httpsTrigger.securityLevel</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. Both HTTP and HTTPS requests with URLs that match the handler succeed without redirects. The application can examine the request to determine which protocol was used and respond accordingly. Possible values: SECURITY_LEVEL_UNSPECIFIED, SECURE_ALWAYS, SECURE_OPTIONAL{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>ingressSettings</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The ingress settings for the function, controlling what traffic can reach
it. Possible values: INGRESS_SETTINGS_UNSPECIFIED, ALLOW_ALL, ALLOW_INTERNAL_ONLY, ALLOW_INTERNAL_AND_GCLB{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>maxInstances</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}The limit on the maximum number of function instances that may coexist at a
given time.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>projectRef</code></p>
            <p><i>Required</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Immutable. The Project that this resource belongs to.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>projectRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The project id of the function.

Allowed value: The Google Cloud resource name of a `Project` resource (format: `projects/{{name}}`).{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>projectRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>projectRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>region</code></p>
            <p><i>Required</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. The name of the Cloud Functions region of the function.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceID</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. Optional. The name of the resource. Used for creation and acquisition. When unset, the value of `metadata.name` is used as the default.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>runtime</code></p>
            <p><i>Required</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The runtime in which to run the function. Required when deploying a new
function, optional when updating an existing function. For a complete
list of possible choices, see the
[`gcloud` command
reference](/sdk/gcloud/reference/functions/deploy#--runtime).
{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountRef</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Immutable.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The email of the function's service account. If empty, defaults to
`{project_id}@appspot.gserviceaccount.com`.

Allowed value: The `email` field of an `IAMServiceAccount` resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>serviceAccountRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>sourceArchiveUrl</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. The Google Cloud Storage URL, starting with gs://, pointing to the zip archive which contains the function.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>sourceRepository</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Immutable. Represents parameters related to source repository where a function is hosted.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>sourceRepository.url</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. The URL pointing to the hosted repository where the function is defined.
There are supported Cloud Source Repository URLs in the following
formats:

To refer to a specific commit:
`https://source.developers.google.com/projects/*/repos/*/revisions/*/paths/*`
To refer to a moveable alias (branch):
`https://source.developers.google.com/projects/*/repos/*/moveable-aliases/*/paths/*`
In particular, to refer to HEAD use `master` moveable alias.
To refer to a specific fixed alias (tag):
`https://source.developers.google.com/projects/*/repos/*/fixed-aliases/*/paths/*`

You may omit `paths/*` if you want to use the main directory.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>timeout</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The function execution timeout. Execution is considered failed and
can be terminated if the function is not completed at the end of the
timeout period. Defaults to 60 seconds.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>vpcConnectorEgressSettings</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The egress settings for the connector, controlling what traffic is diverted
through it. Possible values: VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED, PRIVATE_RANGES_ONLY, ALL_TRAFFIC{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>vpcConnectorRef</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>vpcConnectorRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The VPC Network Connector that this cloud function can connect to. It can
be either the fully-qualified URI, or the short name of the network
connector resource. The format of this field is
`projects/*/locations/*/connectors/*`

Allowed value: The Google Cloud resource name of a `VPCAccessConnector` resource (format: `projects/{{project}}/locations/{{location}}/connectors/{{name}}`).{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>vpcConnectorRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>vpcConnectorRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>


<p>* Field is required when parent field is specified</p>


### Status
#### Schema
```yaml
conditions:
- lastTransitionTime: string
  message: string
  reason: string
  status: string
  type: string
httpsTrigger:
  url: string
observedGeneration: integer
sourceRepository:
  deployedUrl: string
status: string
updateTime: string
versionId: integer
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>conditions</code></td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}Conditions represent the latest available observation of the resource's current state.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[]</code></td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].lastTransitionTime</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Last time the condition transitioned from one status to another.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].message</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Human-readable message indicating details about last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].reason</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Unique, one-word, CamelCase reason for the condition's last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].status</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Status is the status of the condition. Can be True, False, Unknown.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].type</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Type is the type of the condition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>httpsTrigger</code></td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>httpsTrigger.url</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Output only. The deployed url for the function.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>observedGeneration</code></td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>sourceRepository</code></td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>sourceRepository.deployedUrl</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Output only. The URL pointing to the hosted repository where the function
were defined at the time of deployment. It always points to a specific
commit in the format described above.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>status</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Output only. Status of the function deployment. Possible values: CLOUD_FUNCTION_STATUS_UNSPECIFIED, ACTIVE, OFFLINE, DEPLOY_IN_PROGRESS, DELETE_IN_PROGRESS, UNKNOWN{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>updateTime</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Output only. The last update timestamp of a Cloud Function in RFC3339 UTC 'Zulu' format, with nanosecond resolution and up to nine fractional digits.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>versionId</code></td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}Output only. The version identifier of the Cloud Function. Each deployment attempt
results in a new version of a function being created.{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>

## Sample YAML(s)

### Eventtrigger With PubSubTopic
```yaml
# Copyright 2022 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: cloudfunctions.cnrm.cloud.google.com/v1beta1
kind: CloudFunctionsFunction
metadata:
  name: cloudfunctionsfunction-sample-pubsubtopic
spec:
  projectRef:
    # Replace ${PROJECT_ID?} with your project ID
    external: "projects/${PROJECT_ID?}"
  description: "A sample cloud function with an event trigger from PubSubTopic and a VPCAccessConnector"
  region: "us-west2"
  # This field needs to be updated to a supported 1st gen version per the service team
  # support schedule: https://cloud.google.com/functions/docs/runtime-support#support_schedule
  # Deprecated runtime version will cause googleapis error
  runtime: "nodejs20"
  availableMemoryMb: 128
  serviceAccountRef:
    # Replace ${PROJECT_ID?} with your project ID
    external: "${PROJECT_ID?}@appspot.gserviceaccount.com"
  # Replace ${REPO_URL?} with your cloud source repository url
  # Example: https://source.developers.google.com/projects/config-connector-samples/repos/config-connector-samples/moveable-aliases/main/paths/cloudfunctionsfunction
  sourceRepository:
    url: "${REPO_URL?}"
  timeout: "60s"
  entryPoint: "helloGET"
  ingressSettings: "ALLOW_INTERNAL_ONLY"
  environmentVariables:
    TEST_ENV_VARIABLE: "test-env-variable-value"
  maxInstances: 10
  vpcConnectorRef:
    name: "function-dep-trigger"
  vpcConnectorEgressSettings: "PRIVATE_RANGES_ONLY"
  eventTrigger:
    eventType: "providers/cloud.pubsub/eventTypes/topic.publish"
    resourceRef:
      name: "cloudfunctionsfunction-dep-pubsubtopic"
      kind: "PubSubTopic"
    failurePolicy: true
    service: "pubsub.googleapis.com"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeNetwork
metadata:
  name: cloudfunctionsfunction-dep-pubsubtopic
spec:
  autoCreateSubnetworks: false
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubTopic
metadata:
  name: cloudfunctionsfunction-dep-pubsubtopic
---
apiVersion: vpcaccess.cnrm.cloud.google.com/v1beta1
kind: VPCAccessConnector
metadata:
  name: function-dep-trigger
spec:
  location: "us-west2"
  networkRef:
    name: cloudfunctionsfunction-dep-pubsubtopic
  ipCidrRange: "10.5.0.0/28"
  minThroughput: 300
  maxThroughput: 400
  projectRef:
    # Replace ${PROJECT_ID?} with your project ID
    external: "projects/${PROJECT_ID?}"
```

### Eventtrigger With StorageBucket
```yaml
# Copyright 2022 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: cloudfunctions.cnrm.cloud.google.com/v1beta1
kind: CloudFunctionsFunction
metadata:
  name: cloudfunctionsfunction-sample-bucket
spec:
  projectRef:
    # Replace ${PROJECT_ID?} with your project ID
    external: "projects/${PROJECT_ID?}"
  description: "A sample cloud function with an event trigger from StorageBucket"
  region: "us-west2"
  # This field needs to be updated per the service team
  # support schedule: https://cloud.google.com/functions/docs/runtime-support#support_schedule
  # Deprecated runtime version will cause googleapis error
  runtime: "nodejs20"
  sourceArchiveUrl: "gs://config-connector-samples/cloudfunctionsfunction/http_trigger.zip"
  entryPoint: "helloGET"
  eventTrigger:
    eventType: "providers/cloud.storage/eventTypes/object.change"
    resourceRef:
      name: ${PROJECT_ID?}-cloudfunctionsfunction-dep-bucket
      kind: StorageBucket
    failurePolicy: true
    service: "storage.googleapis.com"
---
apiVersion: storage.cnrm.cloud.google.com/v1beta1
kind: StorageBucket
metadata:
  # StorageBucket names must be globally unique. Replace ${PROJECT_ID?} with your project ID.
  name: ${PROJECT_ID?}-cloudfunctionsfunction-dep-bucket
spec:
  lifecycleRule:
    - action:
        type: Delete
      condition:
        age: 7
        withState: ANY
  versioning:
    enabled: true
```

### Httpstrigger
```yaml
# Copyright 2022 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: cloudfunctions.cnrm.cloud.google.com/v1beta1
kind: CloudFunctionsFunction
metadata:
  name: cloudfunctionsfunction-sample-httpstrigger
spec:
  projectRef:
    # Replace ${PROJECT_ID?} with your project ID
    external: "projects/${PROJECT_ID?}"
  region: "us-west2"
  # This field needs to be updated to a supported 1st gen version per the service team
  # support schedule: https://cloud.google.com/functions/docs/runtime-support#support_schedule
  # Deprecated runtime version will cause googleapis error
  runtime: "nodejs20"
  sourceArchiveUrl: "gs://config-connector-samples/cloudfunctionsfunction/http_trigger.zip"
  entryPoint: "helloGET"
  httpsTrigger:
    securityLevel: "SECURE_OPTIONAL"
```


Note: If you have any trouble with instantiating the resource, refer to <a href="/config-connector/docs/troubleshooting">Troubleshoot Config Connector</a>.

{% endblock %}