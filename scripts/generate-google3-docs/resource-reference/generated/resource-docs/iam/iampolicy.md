{# AUTOGENERATED. DO NOT EDIT. #}

{% extends "config-connector/_base.html" %}

{% block page_title %}IAMPolicy{% endblock %}
{% block body %}



<code>IAMPolicy</code> lets you manage the {{iam_name_short}} policy for
a given {{gcp_name_short}} resource.

<code>IAMPolicy</code> represents the _full desired state_ for the associated
{{gcp_name_short}} resource's {{iam_name_short}} policy. It
replaces any existing {{iam_name_short}} policy already attached.

If you want finer-grained control over bindings, use
<a href="/config-connector/docs/reference/resource-docs/iam/iampartialpolicy">IAMPartialPolicy</a>
or <a href="/config-connector/docs/reference/resource-docs/iam/iampolicymember">IAMPolicyMember</a>.
If you want finer-grained control over audit configs, use
<a href="/config-connector/docs/reference/resource-docs/iam/iamauditconfig">IAMAuditConfig</a>.

Warning: Any existing bindings and audit configs are overwritten if not specified in the
<code>IAMPolicy</code> resource. You can lock yourself out of your own
{{gcp_name_short}} project by omitting the default bindings which grant
you access. You can also cause some {{gcp_name_short}} services to stop
working properly by omitting the default bindings created for default service
accounts (for example, <a
href="/compute/docs/access/service-accounts#google-managed_service_accounts">default
{{gce_name_short}} service accounts</a>).

Warning: When you delete an <code>IAMPolicy</code>, all the bindings and audit
configs in the associated {{gcp_name_short}} resource's
{{iam_name_short}} policy are deleted.

Warning: <code>IAMPolicy</code> **should not**
be used in conjunction with <code>IAMPolicyMember</code>,
<code>IAMAuditConfig</code>, and <code>IAMPartialPolicy</code> for the same resource.

Note: Updating <code>spec.resourceRef</code> is not allowed.

<table>
<thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>{{gcp_name_short}} Service Name</td>
<td>{{iam_name_short}}</td>
</tr>
<tr>
<td>{{gcp_name_short}} Service Documentation</td>
<td><a href="/iam/docs/">/iam/docs/</a></td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Name</td>
<td>v1.iamPolicies</td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Documentation</td>
<td><a href="/iam/reference/rest/v1/iamPolicies">/iam/reference/rest/v1/iamPolicies</a></td>
</tr>
<tr>
<td>{{product_name_short}} Resource Short Names</td>
<td>gcpiampolicy<br>gcpiampolicies<br>iampolicy</td>
</tr>
<tr>
<td>{{product_name_short}} Service Name</td>
<td>iam.googleapis.com</td>
</tr>
<tr>
<td>{{product_name_short}} Resource Fully Qualified Name</td>
<td>iampolicies.iam.cnrm.cloud.google.com</td>
</tr>

<tr>
    <td>Can Be Referenced by IAMPolicy/IAMPolicyMember</td>
    <td>No</td>
</tr>


<tr>
<td>{{product_name_short}} Default Average Reconcile Interval In Seconds</td>
<td>600</td>
</tr>
</tbody>
</table>

## Supported Resources

You can use <code>IAMPolicy</code> to configure {{iam_name_short}} for
the following resources.

Note: Resource-level IAM permissions for `BigQueryDataset` must be set through
the resource's `spec.access` field. You cannot reference `BigQueryDataset`
resources using `IAMPolicy`, `IAMPartialPolicy`, and `IAMPolicyMember` since
`BigQueryDataset` does not support {{iam_name_short}}.


<table>
<thead>
    <tr>
        <th><strong>Kind</strong></th>
        <th><strong>Supports Conditions</strong></th>
        <th><strong>Supports Audit Configs</strong></th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>AccessContextManagerAccessPolicy</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>ApigeeEnvironment</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>ArtifactRegistryRepository</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>BigQueryTable</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>BigtableInstance</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>BigtableTable</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>BillingAccount</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>BinaryAuthorizationPolicy</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>CloudFunctionsFunction</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>ComputeBackendBucket</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>ComputeDisk</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>ComputeImage</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>ComputeInstance</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>ComputeSnapshot</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>ComputeSubnetwork</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>DNSManagedZone</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>DataprocCluster</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>Folder</code></td>
        <td>Y</td>
        <td>Y</td>
    </tr>
    <tr>
        <td><code>IAMServiceAccount</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>IAMWorkforcePool</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>KMSCryptoKey</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>KMSKeyRing</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>NetworkSecurityAuthorizationPolicy</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>NetworkSecurityClientTLSPolicy</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>NetworkSecurityServerTLSPolicy</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>Organization</code></td>
        <td>Y</td>
        <td>Y</td>
    </tr>
    <tr>
        <td><code>Project</code></td>
        <td>Y</td>
        <td>Y</td>
    </tr>
    <tr>
        <td><code>PubSubSubscription</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>PubSubTopic</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>RunJob</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>RunService</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>SecretManagerSecret</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>ServiceDirectoryNamespace</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>ServiceDirectoryService</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>SourceRepoRepository</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>SpannerDatabase</code></td>
        <td>Y</td>
        <td></td>
    </tr>
    <tr>
        <td><code>SpannerInstance</code></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td><code>StorageBucket</code></td>
        <td>Y</td>
        <td></td>
    </tr>
</tbody>
</table>

<table>
<thead>
    <tr>
        <th><strong>Kind</strong></th>
        <th><strong>External Reference Formats</strong></th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>AccessContextManagerAccessPolicy</code></td>
        <td>
            <p><code>{% verbatim %}{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ApigeeEnvironment</code></td>
        <td>
            <p><code>{% verbatim %}organizations/{{apigee_organization}}/environments/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ArtifactRegistryRepository</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/repositories/{{repository_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>BigQueryTable</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/datasets/{{dataset_id}}/tables/{{table_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>BigtableInstance</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/instances/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>BigtableTable</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/instances/{{instance_name}}/tables/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>BillingAccount</code></td>
        <td>
            <p><code>{% verbatim %}{{billing_account_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>BinaryAuthorizationPolicy</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/policy{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>CloudFunctionsFunction</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{region}}/functions/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ComputeBackendBucket</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/global/backendBuckets/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ComputeDisk</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/regions/{{region}}/disks/{{name}}{% endverbatim %}</code></p>
            <p><code>{% verbatim %}projects/{{project}}/zones/{{zone}}/disks/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ComputeImage</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/global/images/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ComputeInstance</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/zones/{{zone}}/instances/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ComputeSnapshot</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/global/snapshots/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ComputeSubnetwork</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/regions/{{region}}/subnetworks/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>DNSManagedZone</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/managedZones/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>DataprocCluster</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/regions/{{location}}/clusters/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>Folder</code></td>
        <td>
            <p><code>{% verbatim %}folders/{{folder_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>IAMServiceAccount</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/serviceAccounts/{{account_id}}@{{project}}.iam.gserviceaccount.com{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>IAMWorkforcePool</code></td>
        <td>
            <p><code>{% verbatim %}locations/{{location}}/workforcePools/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>KMSCryptoKey</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/keyRings/{{key_ring_id}}/cryptoKeys/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>KMSKeyRing</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/keyRings/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>NetworkSecurityAuthorizationPolicy</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/authorizationPolicies/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>NetworkSecurityClientTLSPolicy</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/clientTlsPolicies/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>NetworkSecurityServerTLSPolicy</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/serverTlsPolicies/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>Organization</code></td>
        <td>
            <p><code>{% verbatim %}{{org_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>Project</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>PubSubSubscription</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/subscriptions/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>PubSubTopic</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/topics/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>RunJob</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/jobs/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>RunService</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/services/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>SecretManagerSecret</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/secrets/{{secret_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ServiceDirectoryNamespace</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/locations/{{location}}/namespaces/{{namespace_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>ServiceDirectoryService</code></td>
        <td>
            <p><code>{% verbatim %}{{namespace}}/services/{{service_id}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>SourceRepoRepository</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/repos/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>SpannerDatabase</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/instances/{{instance}}/databases/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>SpannerInstance</code></td>
        <td>
            <p><code>{% verbatim %}projects/{{project}}/instances/{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
    <tr>
        <td><code>StorageBucket</code></td>
        <td>
            <p><code>{% verbatim %}{{name}}{% endverbatim %}</code></p>
        </td>
    </tr>
</tbody>
</table>

## Custom Resource Definition Properties



### Spec
#### Schema
```yaml
auditConfigs:
- auditLogConfigs:
  - exemptedMembers:
    - string
    logType: string
  service: string
bindings:
- condition:
    description: string
    expression: string
    title: string
  members:
  - string
  role: string
resourceRef:
  apiVersion: string
  external: string
  kind: string
  name: string
  namespace: string
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            <p><code>auditConfigs</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}Optional. The list of IAM audit configs.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>auditConfigs[]</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Specifies the Cloud Audit Logs configuration for the IAM policy.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>auditConfigs[].auditLogConfigs</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}Required. The configuration for logging of each type of permission.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>auditConfigs[].auditLogConfigs[]</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>auditConfigs[].auditLogConfigs[].exemptedMembers</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">list (string)</code></p>
            <p>{% verbatim %}Identities that do not cause logging for this type of permission. The format is the same as that for 'members' in IAMPolicy/IAMPolicyMember.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>auditConfigs[].auditLogConfigs[].exemptedMembers[]</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>auditConfigs[].auditLogConfigs[].logType</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Permission type for which logging is to be configured. Must be one of 'DATA_READ', 'DATA_WRITE', or 'ADMIN_READ'.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>auditConfigs[].service</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Required. The service for which to enable Data Access audit logs. The special value 'allServices' covers all services. Note that if there are audit configs covering both 'allServices' and a specific service, then the union of the two audit configs is used for that service: the 'logTypes' specified in each 'auditLogConfig' are enabled, and the 'exemptedMembers' in each 'auditLogConfg' are exempted.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}Optional. The list of IAM bindings.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[]</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Specifies the members to bind to an IAM role.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[].condition</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Optional. The condition under which the binding applies.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[].condition.description</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[].condition.expression</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[].condition.title</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[].members</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">list (string)</code></p>
            <p>{% verbatim %}Optional. The list of IAM users to be bound to the role.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[].members[]</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>bindings[].role</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Required. The role to bind the users to.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceRef</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Immutable. Required. The GCP resource to set the IAM policy on.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceRef.apiVersion</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceRef.kind</code></p>
            <p><i>Required*</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>


<p>* Field is required when parent field is specified</p>


### Status
#### Schema
```yaml
conditions:
- lastTransitionTime: string
  message: string
  reason: string
  status: string
  type: string
observedGeneration: integer
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>conditions</code></td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}Conditions represent the latest available observations of the IAM policy's current state.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[]</code></td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].lastTransitionTime</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Last time the condition transitioned from one status to another.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].message</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Human-readable message indicating details about last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].reason</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Unique, one-word, CamelCase reason for the condition's last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].status</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Status is the status of the condition. Can be True, False, Unknown.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].type</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Type is the type of the condition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>observedGeneration</code></td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource.{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>

## Sample YAML(s)

### External Project Level Policy
```yaml
# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# **WARNING**: The policy here represents the full declarative intent for the
# referenced project. It will fully overwrite the existing policy on the
# project.
#
# If you want finer-grained control over a project's IAM bindings, use
# IAMPolicyMember. If you want finer-grained control over audit configs, use
# IAMAuditConfig.
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicy
metadata:
  name: iampolicy-sample-external-project
spec:
  resourceRef:
    kind: Project
    external: projects/iampolicy-dep-external-project
  bindings:
    - members:
        # Replace ${GSA_EMAIL?} with the Config Connector service account's
        # email address. This ensures that the Config Connector service account
        # can continue to manage the referenced project.
        - "serviceAccount:${GSA_EMAIL?}"
      role: roles/owner
    - members:
        - serviceAccount:iampolicy-dep-external-project@iampolicy-dep-external-project.iam.gserviceaccount.com
      role: roles/storage.admin
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMServiceAccount
metadata:
  annotations:
    cnrm.cloud.google.com/project-id: iampolicy-dep-external-project
  name: iampolicy-dep-external-project
---
# Creates a Project resource to demonstrate how an IAMPolicy can reference a
# Project using `external`.
apiVersion: resourcemanager.cnrm.cloud.google.com/v1beta1
kind: Project
metadata:
  annotations:
    cnrm.cloud.google.com/auto-create-network: "false"
  name: iampolicy-dep-external-project
spec:
  name: Config Connector Sample
  organizationRef:
    # Replace "${ORG_ID?}" with the numeric ID for your organization
    external: "${ORG_ID?}"
```

### KMS Policy With Condition
```yaml
# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicy
metadata:
  labels:
    label-one: value-one
  name: iampolicy-sample-condition
spec:
  resourceRef:
    kind: KMSKeyRing
    name: iampolicy-dep-condition
  bindings:
    - role: roles/cloudkms.admin
      condition:
        title: expires_after_2019_12_31
        description: Expires at midnight of 2019-12-31
        expression: request.time < timestamp("2020-01-01T00:00:00Z")
      members:
        # replace ${PROJECT_ID?} with your project name
        - serviceAccount:iampolicy-dep-condition@${PROJECT_ID?}.iam.gserviceaccount.com
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMServiceAccount
metadata:
  name: iampolicy-dep-condition
---
apiVersion: kms.cnrm.cloud.google.com/v1beta1
kind: KMSKeyRing
metadata:
  name: iampolicy-dep-condition
spec:
  location: us-central1
```

### Project Level Policy
```yaml
# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# **WARNING**: The policy here represents the full declarative intent for the
# referenced project. It will fully overwrite the existing policy on the
# project.
#
# If you want finer-grained control over a project's IAM bindings, use
# IAMPolicyMember. If you want finer-grained control over audit configs, use
# IAMAuditConfig.
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicy
metadata:
  name: iampolicy-sample-project
spec:
  resourceRef:
    kind: Project
    name: iampolicy-dep-project
  bindings:
    - members:
        # Replace ${GSA_EMAIL?} with the Config Connector service account's
        # email address. This ensures that the Config Connector service account
        # can continue to manage the referenced project.
        - "serviceAccount:${GSA_EMAIL?}"
      role: roles/owner
    - members:
        - serviceAccount:iampolicy-dep-project@iampolicy-dep-project.iam.gserviceaccount.com
      role: roles/storage.admin
  auditConfigs:
    - service: allServices
      auditLogConfigs:
        - logType: DATA_WRITE
        - logType: DATA_READ
          exemptedMembers:
            - serviceAccount:iampolicy-dep-project@iampolicy-dep-project.iam.gserviceaccount.com
    - service: compute.googleapis.com
      auditLogConfigs:
        - logType: ADMIN_READ
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMServiceAccount
metadata:
  annotations:
    cnrm.cloud.google.com/project-id: iampolicy-dep-project
  name: iampolicy-dep-project
---
apiVersion: resourcemanager.cnrm.cloud.google.com/v1beta1
kind: Project
metadata:
  annotations:
    cnrm.cloud.google.com/auto-create-network: "false"
  name: iampolicy-dep-project
spec:
  name: Config Connector Sample
  organizationRef:
    # Replace "${ORG_ID?}" with the numeric ID for your organization
    external: "${ORG_ID?}"
```

### PubSub Admin Policy
```yaml
# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicy
metadata:
  labels:
    label-one: value-one
  name: iampolicy-sample-pubsubadmin
spec:
  resourceRef:
    kind: PubSubTopic
    name: iampolicy-dep-pubsubadmin
  bindings:
    - role: roles/editor
      members:
        # replace ${PROJECT_ID?} with your project name
        - serviceAccount:iampolicy-dep-pubsubadmin@${PROJECT_ID?}.iam.gserviceaccount.com
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMServiceAccount
metadata:
  name: iampolicy-dep-pubsubadmin
---
apiVersion: pubsub.cnrm.cloud.google.com/v1beta1
kind: PubSubTopic
metadata:
  name: iampolicy-dep-pubsubadmin
```

### Workload Identity Policy
```yaml
# Copyright 2020 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMPolicy
metadata:
  name: iampolicy-sample-workloadidentity
spec:
  resourceRef:
    kind: IAMServiceAccount
    name: iampolicy-dep-workloadidentity
  bindings:
    - role: roles/iam.workloadIdentityUser
      members:
        # replace ${PROJECT_ID} with your project name
        - serviceAccount:${PROJECT_ID?}.svc.id.goog[default/iampolicy-dep-workloadidentity]
---
apiVersion: iam.cnrm.cloud.google.com/v1beta1
kind: IAMServiceAccount
metadata:
  name: iampolicy-dep-workloadidentity
spec:
  displayName: Example Service Account
---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: iampolicy-dep-workloadidentity
  annotations:
    # replace ${PROJECT_ID?} with your project name
    iam.gke.io/gcp-service-account: iampolicy-dep-workloadidentity@${PROJECT_ID?}.iam.gserviceaccount.com
```


Note: If you have any trouble with instantiating the resource, refer to <a href="/config-connector/docs/troubleshooting">Troubleshoot Config Connector</a>.

{% endblock %}
