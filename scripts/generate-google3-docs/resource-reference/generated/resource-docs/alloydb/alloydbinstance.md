{# AUTOGENERATED. DO NOT EDIT. #}

{% extends "config-connector/_base.html" %}

{% block page_title %}AlloyDBInstance{% endblock %}
{% block body %}



Note: Secondary instances should only be created once the associated primary
instance is ready and up to date.

<table>
<thead>
<tr>
<th><strong>Property</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>{{gcp_name_short}} Service Name</td>
<td>AlloyDB for PostgreSQL</td>
</tr>
<tr>
<td>{{gcp_name_short}} Service Documentation</td>
<td><a href="/alloydb/docs/">/alloydb/docs/</a></td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Name</td>
<td>v1.projects.locations.clusters.instances</td>
</tr>
<tr>
<td>{{gcp_name_short}} REST Resource Documentation</td>
<td><a href="/alloydb/docs/reference/rest/v1/projects.locations.clusters.instances">/alloydb/docs/reference/rest/v1/projects.locations.clusters.instances</a></td>
</tr>
<tr>
<td>{{product_name_short}} Resource Short Names</td>
<td>gcpalloydbinstance<br>gcpalloydbinstances<br>alloydbinstance</td>
</tr>
<tr>
<td>{{product_name_short}} Service Name</td>
<td>alloydb.googleapis.com</td>
</tr>
<tr>
<td>{{product_name_short}} Resource Fully Qualified Name</td>
<td>alloydbinstances.alloydb.cnrm.cloud.google.com</td>
</tr>

<tr>
    <td>Can Be Referenced by IAMPolicy/IAMPolicyMember</td>
    <td>No</td>
</tr>


<tr>
<td>{{product_name_short}} Default Average Reconcile Interval In Seconds</td>
<td>600</td>
</tr>
</tbody>
</table>

## Custom Resource Definition Properties


### Annotations
<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>cnrm.cloud.google.com/state-into-spec</code></td>
    </tr>
</tbody>
</table>


### Spec
#### Schema
```yaml
annotations:
  string: string
availabilityType: string
clusterRef:
  external: string
  name: string
  namespace: string
databaseFlags:
  string: string
displayName: string
gceZone: string
instanceType: string
instanceTypeRef:
  external: string
  name: string
  namespace: string
machineConfig:
  cpuCount: integer
networkConfig:
  authorizedExternalNetworks:
  - cidrRange: string
  enablePublicIp: boolean
readPoolConfig:
  nodeCount: integer
resourceID: string
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>
            <p><code>annotations</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">map (key: string, value: string)</code></p>
            <p>{% verbatim %}Annotations to allow client tools to store small amount of arbitrary data. This is distinct from labels.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>availabilityType</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}'Availability type of an Instance. Defaults to REGIONAL for both primary and read instances.
Note that primary and read instances can have different availability types.
Only READ_POOL instance supports ZONAL type. Users can't specify the zone for READ_POOL instance.
Zone is automatically chosen from the list of zones in the region specified.
Read pool of size 1 can only have zonal availability. Read pools with node count of 2 or more
can have regional availability (nodes are present in 2 or more zones in a region).' Possible values: ["AVAILABILITY_TYPE_UNSPECIFIED", "ZONAL", "REGIONAL"].{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>clusterRef</code></p>
            <p><i>Required</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>clusterRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Allowed value: The `name` field of an `AlloyDBCluster` resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>clusterRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>clusterRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>databaseFlags</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">map (key: string, value: string)</code></p>
            <p>{% verbatim %}Database flags. Set at instance level. * They are copied from primary instance on read instance creation. * Read instances can set new or override existing flags that are relevant for reads, e.g. for enabling columnar cache on a read instance. Flags set on read instance may or may not be present on primary.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>displayName</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}User-settable and human-readable display name for the Instance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>gceZone</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The Compute Engine zone that the instance should serve from, per https://cloud.google.com/compute/docs/regions-zones This can ONLY be specified for ZONAL instances. If present for a REGIONAL instance, an error will be thrown. If this is absent for a ZONAL instance, instance is created in a random zone with available capacity.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>instanceType</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}We recommend that you use `instanceTypeRef` instead.
The type of the instance. Possible values: [PRIMARY, READ_POOL, SECONDARY]{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>instanceTypeRef</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}The type of instance.
Possible values: ["PRIMARY", "READ_POOL", "SECONDARY"]
For PRIMARY and SECONDARY instances, set the value to refer to the name of the associated cluster.
This is recommended because the instance type of primary and secondary instances is tied to the cluster type of the associated cluster.
If the secondary cluster is promoted to primary cluster, then the associated secondary instance also becomes primary instance.
Example:
instanceTypeRef:
  name: clusterName
For instances of type READ_POOL, set the value using external keyword.
Example:
instanceTypeRef:
  external: READ_POOL
If the instance type is SECONDARY, the delete instance operation does not delete the secondary instance but abandons it instead.
Use deletionPolicy = "FORCE" in the associated secondary cluster and delete the cluster forcefully to delete the secondary cluster as well its associated secondary instance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>instanceTypeRef.external</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Allowed value: The `clusterType` field of an `AlloyDBCluster` resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>instanceTypeRef.name</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>instanceTypeRef.namespace</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>machineConfig</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Configurations for the machines that host the underlying database engine.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>machineConfig.cpuCount</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}The number of CPU's in the VM instance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkConfig</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Instance level network configuration.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkConfig.authorizedExternalNetworks</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}A list of external networks authorized to access this instance. This field is only allowed to be set when 'enable_public_ip' is set to true.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkConfig.authorizedExternalNetworks[]</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkConfig.authorizedExternalNetworks[].cidrRange</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}CIDR range for one authorized network of the instance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>networkConfig.enablePublicIp</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">boolean</code></p>
            <p>{% verbatim %}Enabling public ip for the instance. If a user wishes to disable this, please also clear the list of the authorized external networks set on the same instance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>readPoolConfig</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}Read pool specific config. If the instance type is READ_POOL, this configuration must be provided.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>readPoolConfig.nodeCount</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}Read capacity, i.e. number of nodes in a read pool instance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td>
            <p><code>resourceID</code></p>
            <p><i>Optional</i></p>
        </td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Immutable. Optional. The instanceId of the resource. Used for creation and acquisition. When unset, the value of `metadata.name` is used as the default.{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>



### Status
#### Schema
```yaml
conditions:
- lastTransitionTime: string
  message: string
  reason: string
  status: string
  type: string
createTime: string
ipAddress: string
name: string
observedGeneration: integer
publicIpAddress: string
reconciling: boolean
state: string
uid: string
updateTime: string
```

<table class="properties responsive">
<thead>
    <tr>
        <th colspan="2">Fields</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td><code>conditions</code></td>
        <td>
            <p><code class="apitype">list (object)</code></p>
            <p>{% verbatim %}Conditions represent the latest available observation of the resource's current state.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[]</code></td>
        <td>
            <p><code class="apitype">object</code></p>
            <p>{% verbatim %}{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].lastTransitionTime</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Last time the condition transitioned from one status to another.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].message</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Human-readable message indicating details about last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].reason</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Unique, one-word, CamelCase reason for the condition's last transition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].status</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Status is the status of the condition. Can be True, False, Unknown.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>conditions[].type</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Type is the type of the condition.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>createTime</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Time the Instance was created in UTC.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>ipAddress</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The IP address for the Instance. This is the connection endpoint for an end-user application.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>name</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The name of the instance resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>observedGeneration</code></td>
        <td>
            <p><code class="apitype">integer</code></p>
            <p>{% verbatim %}ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>publicIpAddress</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The public IP addresses for the Instance. This is available ONLY when networkConfig.enablePublicIp is set to true. This is the connection endpoint for an end-user application.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>reconciling</code></td>
        <td>
            <p><code class="apitype">boolean</code></p>
            <p>{% verbatim %}Set to true if the current state of Instance does not match the user's intended state, and the service is actively updating the resource to reconcile them. This can happen due to user-triggered updates or system actions like failover or maintenance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>state</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The current state of the alloydb instance.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>uid</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}The system-generated UID of the resource.{% endverbatim %}</p>
        </td>
    </tr>
    <tr>
        <td><code>updateTime</code></td>
        <td>
            <p><code class="apitype">string</code></p>
            <p>{% verbatim %}Time the Instance was updated in UTC.{% endverbatim %}</p>
        </td>
    </tr>
</tbody>
</table>

## Sample YAML(s)

### Primary Instance
```yaml
# Copyright 2023 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBInstance
metadata:
  name: alloydbinstance-sample-primary
spec:
  clusterRef: 
    name: alloydbinstance-dep-primary
  instanceTypeRef:
    name: alloydbinstance-dep-primary
  databaseFlags:
    enable_google_adaptive_autovacuum: "off"
    password.enforce_complexity: "on"
  machineConfig:
    cpuCount: 2
  networkConfig:
    enablePublicIp: true
    authorizedExternalNetworks:
    - cidrRange: 8.8.8.8/30
    - cidrRange: 8.8.4.4/30
---
apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBCluster
metadata:
  name: alloydbinstance-dep-primary
spec:
  location: asia-east1
  networkConfig:
    networkRef: 
      name: alloydbinstance-dep-primary
  projectRef:
    external: ${PROJECT_ID?}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: alloydbinstance-dep-primary
spec:
  location: global
  addressType: INTERNAL
  networkRef:
    name: alloydbinstance-dep-primary
  prefixLength: 16
  purpose: VPC_PEERING
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeNetwork
metadata:
  name: alloydbinstance-dep-primary
---
apiVersion: servicenetworking.cnrm.cloud.google.com/v1beta1
kind: ServiceNetworkingConnection
metadata:
  name: alloydbinstance-dep-primary
spec:
  networkRef:
    name: alloydbinstance-dep-primary
  reservedPeeringRanges:
  - external: alloydbinstance-dep-primary
  service: servicenetworking.googleapis.com
```

### Read Instance
```yaml
# Copyright 2023 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBInstance
metadata:
  name: alloydbinstance-dep-read
spec:
  clusterRef: 
    name: alloydbinstance-dep-read
  instanceTypeRef:
    name: alloydbinstance-dep-read
---
apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBInstance
metadata:
  name: alloydbinstance-sample-read
spec:
  clusterRef: 
    name: alloydbinstance-dep-read
  instanceTypeRef:
    external: READ_POOL
  availabilityType: REGIONAL
  databaseFlags:
    google_columnar_engine.enabled: "on"
  machineConfig:
    cpuCount: 2
  readPoolConfig:
    nodeCount: 3
---
apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBCluster
metadata:
  name: alloydbinstance-dep-read
spec:
  location: asia-east2
  networkConfig:
    networkRef: 
      name: alloydbinstance-dep-read
  projectRef:
    external: ${PROJECT_ID?}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: alloydbinstance-dep-read
spec:
  location: global
  addressType: INTERNAL
  networkRef:
    name: alloydbinstance-dep-read
  prefixLength: 16
  purpose: VPC_PEERING
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeNetwork
metadata:
  name: alloydbinstance-dep-read
---
apiVersion: servicenetworking.cnrm.cloud.google.com/v1beta1
kind: ServiceNetworkingConnection
metadata:
  name: alloydbinstance-dep-read
spec:
  networkRef:
    name: alloydbinstance-dep-read
  reservedPeeringRanges:
  - name: alloydbinstance-dep-read
  service: servicenetworking.googleapis.com
```

### Secondary Instance
```yaml
# Copyright 2024 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBInstance
metadata:
  name: alloydbinstance-dep-secondary
spec:
  clusterRef: 
    name: alloydbinstance-dep1-secondary
  instanceTypeRef:
    name: alloydbinstance-dep1-secondary
---
apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBInstance
metadata:
  name: alloydbinstance-sample-secondary
spec:
  clusterRef: 
    name: alloydbinstance-dep2-secondary
  instanceTypeRef:
    name: alloydbinstance-dep2-secondary
---
apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBCluster
metadata:
  name: alloydbinstance-dep1-secondary
spec:
  location: asia-northeast1
  networkConfig:
    networkRef: 
      name: alloydbinstance-dep-secondary
  projectRef:
    external: ${PROJECT_ID?}
  initialUser:
    user: "postgres"
    password:
      value: "postgres"
---
apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBCluster
metadata:
  name: alloydbinstance-dep2-secondary
spec:
  location: asia-northeast2
  networkConfig:
    networkRef: 
      name: alloydbinstance-dep-secondary
  projectRef:
    external: ${PROJECT_ID?}
  clusterType: "SECONDARY"
  secondaryConfig:
    primaryClusterNameRef:
      name: alloydbinstance-dep1-secondary
  deletionPolicy: "FORCE"
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: alloydbinstance-dep-secondary
spec:
  location: global
  addressType: INTERNAL
  networkRef:
    name: alloydbinstance-dep-secondary
  prefixLength: 16
  purpose: VPC_PEERING
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeNetwork
metadata:
  name: alloydbinstance-dep-secondary
---
apiVersion: servicenetworking.cnrm.cloud.google.com/v1beta1
kind: ServiceNetworkingConnection
metadata:
  name: alloydbinstance-dep-secondary
spec:
  networkRef:
    name: alloydbinstance-dep-secondary
  reservedPeeringRanges:
  - name: alloydbinstance-dep-secondary
  service: servicenetworking.googleapis.com
```

### Zonal Instance
```yaml
# Copyright 2023 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBInstance
metadata:
  name: alloydbinstance-sample-zonal
spec:
  clusterRef: 
    name: alloydbinstance-dep-zonal
  availabilityType: ZONAL
  instanceTypeRef:
    name: alloydbinstance-dep-zonal
  machineConfig:
    cpuCount: 2
---
apiVersion: alloydb.cnrm.cloud.google.com/v1beta1
kind: AlloyDBCluster
metadata:
  name: alloydbinstance-dep-zonal
spec:
  location: asia-northeast3
  networkConfig:
    networkRef: 
      name: alloydbinstance-dep-zonal
  projectRef:
    external: ${PROJECT_ID?}
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeAddress
metadata:
  name: alloydbinstance-dep-zonal
spec:
  location: global
  addressType: INTERNAL
  networkRef:
    name: alloydbinstance-dep-zonal
  prefixLength: 16
  purpose: VPC_PEERING
---
apiVersion: compute.cnrm.cloud.google.com/v1beta1
kind: ComputeNetwork
metadata:
  name: alloydbinstance-dep-zonal
---
apiVersion: servicenetworking.cnrm.cloud.google.com/v1beta1
kind: ServiceNetworkingConnection
metadata:
  name: alloydbinstance-dep-zonal
spec:
  networkRef:
    name: alloydbinstance-dep-zonal
  reservedPeeringRanges:
  - external: alloydbinstance-dep-zonal
  service: servicenetworking.googleapis.com
```


Note: If you have any trouble with instantiating the resource, refer to <a href="/config-connector/docs/troubleshooting">Troubleshoot Config Connector</a>.

{% endblock %}
