# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

Object:
  apiVersion: compute.cnrm.cloud.google.com/v1beta1
  kind: ComputeTargetHTTPSProxy
  metadata:
    annotations:
      cnrm.cloud.google.com/management-conflict-prevention-policy: none
      cnrm.cloud.google.com/project-id: anz-x-apps-platdev-99bb42
      cnrm.cloud.google.com/state-into-spec: absent
      kubectl.kubernetes.io/last-applied-configuration: |
        {"apiVersion":"compute.cnrm.cloud.google.com/v1beta1","kind":"ComputeTargetHTTPSProxy","metadata":{"annotations":{},"labels":{"app.kubernetes.io/managed-by":"netoperator","ci_group":"platform","managed-by":"netoperator","netoperator.platform.x.anz/controller":"internalloadbalancer","x.anz.com/asset":"platform"},"name":"test-ilb-multiregion","namespace":"platform-kcc-apps-platdev-99bb42","ownerReferences":[{"apiVersion":"netoperator.platform.x.anz/v1alpha1","blockOwnerDeletion":true,"controller":true,"kind":"InternalLoadBalancer","name":"test-ilb-multiregion","uid":"c3720208-d158-4f07-9b15-369b12a20443"}]},"spec":{"certificateManagerCertificates":[{"name":"kcc-test-cas-cert-2","namespace":"platform-kcc-apps-platdev-99bb42"}],"description":"Target Proxy for test-ilb-multiregion","location":"global","resourceID":"test-ilb-multiregion","sslPolicyRef":{"external":"https://www.googleapis.com/compute/v1/projects/anz-x-apps-platdev-99bb42/global/sslPolicies/test-ilb-multiregion"},"urlMapRef":{"name":"test-ilb-multiregion","namespace":"platform-kcc-apps-platdev-99bb42"}}}
      utils.platform.x.anz/owner: '{"apiVersion":"netoperator.platform.x.anz/v1alpha1","kind":"InternalLoadBalancer","name":"test-ilb-multiregion","namespace":"platform-kcc-apps-platdev-99bb42"}'
    creationTimestamp: "2025-05-21T05:36:13Z"
    finalizers:
    - cnrm.cloud.google.com/finalizer
    - cnrm.cloud.google.com/deletion-defender
    generation: 14
    labels:
      app.kubernetes.io/managed-by: netoperator
      ci_group: platform
      managed-by: netoperator
      netoperator.platform.x.anz/controller: internalloadbalancer
      x.anz.com/asset: platform
    managedFields:
    - apiVersion: compute.cnrm.cloud.google.com/v1beta1
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:annotations:
            .: {}
            f:cnrm.cloud.google.com/project-id: {}
            f:utils.platform.x.anz/owner: {}
          f:labels:
            .: {}
            f:app.kubernetes.io/managed-by: {}
            f:managed-by: {}
            f:netoperator.platform.x.anz/controller: {}
          f:ownerReferences:
            .: {}
            k:{"uid":"c3720208-d158-4f07-9b15-369b12a20443"}: {}
        f:spec:
          .: {}
          f:description: {}
          f:location: {}
          f:resourceID: {}
          f:sslPolicyRef:
            .: {}
            f:external: {}
          f:urlMapRef:
            .: {}
            f:name: {}
            f:namespace: {}
      manager: ___2netop_main
      operation: Update
      time: "2025-05-21T05:36:13Z"
    - apiVersion: compute.cnrm.cloud.google.com/v1beta1
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:annotations:
            f:cnrm.cloud.google.com/state-into-spec: {}
      manager: cnrm-controller-manager
      operation: Update
      time: "2025-05-21T05:36:36Z"
    - apiVersion: compute.cnrm.cloud.google.com/v1beta1
      fieldsType: FieldsV1
      fieldsV1:
        f:metadata:
          f:annotations:
            f:kubectl.kubernetes.io/last-applied-configuration: {}
      manager: kubectl-client-side-apply
      operation: Update
      time: "2025-05-29T23:52:46Z"
    - apiVersion: compute.cnrm.cloud.google.com/v1beta1
      fieldsType: FieldsV1
      fieldsV1:
        f:spec:
          f:certificateManagerCertificates: {}
      manager: kubectl-edit
      operation: Update
      time: "2025-05-29T23:54:39Z"
    - apiVersion: compute.cnrm.cloud.google.com/v1beta1
      fieldsType: FieldsV1
      fieldsV1:
        f:status:
          .: {}
          f:conditions: {}
          f:creationTimestamp: {}
          f:observedGeneration: {}
          f:proxyId: {}
          f:selfLink: {}
      manager: cnrm-controller-manager
      operation: Update
      subresource: status
      time: "2025-05-30T00:21:04Z"
    name: test-ilb-multiregion
    namespace: platform-kcc-apps-platdev-99bb42
    ownerReferences:
    - apiVersion: netoperator.platform.x.anz/v1alpha1
      blockOwnerDeletion: true
      controller: true
      kind: InternalLoadBalancer
      name: test-ilb-multiregion
      uid: c3720208-d158-4f07-9b15-369b12a20443
    resourceVersion: "1893658276"
    uid: a7c1d629-62f7-42cd-ac54-c4e0af332e49
  spec:
    certificateManagerCertificates:
    - name: kcc-test-cas-cert-2
      namespace: platform-kcc-apps-platdev-99bb42
    description: Target Proxy for test-ilb-multiregion
    location: global
    resourceID: test-ilb-multiregion
    sslPolicyRef:
      external: https://www.googleapis.com/compute/v1/projects/anz-x-apps-platdev-99bb42/global/sslPolicies/test-ilb-multiregion
    urlMapRef:
      name: test-ilb-multiregion
      namespace: platform-kcc-apps-platdev-99bb42
  status:
    conditions:
    - lastTransitionTime: "2025-05-29T23:54:39Z"
      message: 'Update call failed: error applying desired state: summary: Error updating
        TargetHttpsProxy "projects/anz-x-apps-platdev-99bb42/global/targetHttpsProxies/test-ilb-multiregion":
        googleapi: Error 412: Certificate Map or at least 1 SSL certificate must be
        specified for setting SSL certificates in TargetHttpsProxy., conditionNotMet'
      reason: UpdateFailed
      status: "False"
      type: Ready
    creationTimestamp: "2025-05-20T22:36:24.635-07:00"
    observedGeneration: 14
    proxyId: 5839656186898602000
    selfLink: https://www.googleapis.com/compute/v1/projects/anz-x-apps-platdev-99bb42/global/targetHttpsProxies/test-ilb-multiregion
