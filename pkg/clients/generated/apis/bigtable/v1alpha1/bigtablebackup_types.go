// Copyright 2020 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// ----------------------------------------------------------------------------
//
//     ***     AUTO GENERATED CODE    ***    AUTO GENERATED CODE     ***
//
// ----------------------------------------------------------------------------
//
//     This file is automatically generated by Config Connector and manual
//     changes will be clobbered when the file is regenerated.
//
// ----------------------------------------------------------------------------

// *** DISCLAIMER ***
// Config Connector's go-client for CRDs is currently in ALPHA, which means
// that future versions of the go-client may include breaking changes.
// Please try it out and give us feedback!

package v1alpha1

import (
	"github.com/GoogleCloudPlatform/k8s-config-connector/pkg/clients/generated/apis/k8s/v1alpha1"
	apiextensionsv1 "k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1"
	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
)

var _ = apiextensionsv1.JSON{}

type BigtableBackupSpec struct {
	/* Indicates the backup type of the backup. */
	// +optional
	BackupType *string `json:"backupType,omitempty"`

	/* ClusterRef defines the resource reference to BigtableCluster, which "External" field holds the GCP identifier for the KRM object. */
	ClusterRef v1alpha1.ResourceRef `json:"clusterRef"`

	/* Required. The expiration time of the backup.
	When creating a backup or updating its `expire_time`, the value must be
	greater than the backup creation time by:
	- At least 6 hours
	- At most 90 days

	Once the `expire_time` has passed, Cloud Bigtable will delete the backup. */
	// +optional
	ExpireTime *string `json:"expireTime,omitempty"`

	/* The time at which the hot backup will be converted to a standard backup.
	Once the `hot_to_standard_time` has passed, Cloud Bigtable will convert the
	hot backup to a standard backup. This value must be greater than the backup
	creation time by:
	- At least 24 hours

	This field only applies for hot backups. When creating or updating a
	standard backup, attempting to set this field will fail the request. */
	// +optional
	HotToStandardTime *string `json:"hotToStandardTime,omitempty"`

	/* The BigtableBackup name. If not given, the metadata.name will be used. */
	// +optional
	ResourceID *string `json:"resourceID,omitempty"`

	/* Required. Immutable. Name of the table from which this backup was created. This needs to be in the same instance as the backup. Values are of the form `projects/{project}/instances/{instance}/tables/{source_table}`. */
	// +optional
	SourceTableRef *v1alpha1.ResourceRef `json:"sourceTableRef,omitempty"`
}

type BackupDetailsStatus struct {
	/* A URL/resource name that uniquely identifies the type of the serialized
	protocol buffer message. This string must contain at least
	one "/" character. The last segment of the URL's path must represent
	the fully qualified name of the type (as in
	`path/google.protobuf.Duration`). The name should be in a canonical form
	(e.g., leading "." is not accepted).

	In practice, teams usually precompile into the binary all types that they
	expect it to use in the context of Any. However, for URLs which use the
	scheme `http`, `https`, or no scheme, one can optionally set up a type
	server that maps type URLs to message definitions as follows:

	* If no scheme is provided, `https` is assumed.
	* An HTTP GET on the URL must yield a [google.protobuf.Type][]
	value in binary format, or produce an error.
	* Applications are allowed to cache lookup results based on the
	URL, or have them precompiled into a binary to avoid any
	lookup. Therefore, binary compatibility needs to be preserved
	on changes to types. (Use versioned type names to manage
	breaking changes.)

	Note: this functionality is not currently available in the official
	protobuf release, and it is not used for type URLs beginning with
	type.googleapis.com.

	Schemes other than `http`, `https` (or the empty scheme) might be
	used with implementation specific semantics. */
	// +optional
	TypeURL *string `json:"typeURL,omitempty"`

	/* Must be a valid serialized protocol buffer of the above specified type. */
	// +optional
	Value *string `json:"value,omitempty"`
}

type BackupEncryptionInfoStatus struct {
	/* Output only. The status of encrypt/decrypt calls on underlying data for this resource. Regardless of status, the existing data is always encrypted at rest. */
	// +optional
	EncryptionStatus *BackupEncryptionStatusStatus `json:"encryptionStatus,omitempty"`

	/* Output only. The type of encryption used to protect this resource. */
	// +optional
	EncryptionType *string `json:"encryptionType,omitempty"`

	/* Output only. The version of the Cloud KMS key specified in the parent cluster that is in use for the data underlying this table. */
	// +optional
	KmsKeyVersion *string `json:"kmsKeyVersion,omitempty"`
}

type BackupEncryptionStatusStatus struct {
	/* The status code, which should be an enum value of [google.rpc.Code][google.rpc.Code]. */
	// +optional
	Code *int32 `json:"code,omitempty"`

	/* A list of messages that carry the error details.  There is a common set of message types for APIs to use. */
	// +optional
	Details []BackupDetailsStatus `json:"details,omitempty"`

	/* A developer-facing error message, which should be in English. Any user-facing error message should be localized and sent in the [google.rpc.Status.details][google.rpc.Status.details] field, or localized by the client. */
	// +optional
	Message *string `json:"message,omitempty"`
}

type BackupObservedStateStatus struct {
	/* Output only. The encryption information for the backup. */
	// +optional
	EncryptionInfo *BackupEncryptionInfoStatus `json:"encryptionInfo,omitempty"`

	/* Output only. `end_time` is the time that the backup was finished. The row data in the backup will be no newer than this timestamp. */
	// +optional
	EndTime *string `json:"endTime,omitempty"`

	/* Output only. Size of the backup in bytes. */
	// +optional
	SizeBytes *int64 `json:"sizeBytes,omitempty"`

	/* Output only. Name of the backup from which this backup was copied. If a backup is not created by copying a backup, this field will be empty. Values are of the form: projects/<project>/instances/<instance>/clusters/<cluster>/backups/<backup> */
	// +optional
	SourceBackup *string `json:"sourceBackup,omitempty"`

	/* Output only. `start_time` is the time that the backup was started (i.e. approximately the time the [CreateBackup][google.bigtable.admin.v2.BigtableTableAdmin.CreateBackup] request is received).  The row data in this backup will be no older than this timestamp. */
	// +optional
	StartTime *string `json:"startTime,omitempty"`

	/* Output only. The current state of the backup. */
	// +optional
	State *string `json:"state,omitempty"`
}

type BigtableBackupStatus struct {
	/* Conditions represent the latest available observations of the
	   BigtableBackup's current state. */
	Conditions []v1alpha1.Condition `json:"conditions,omitempty"`
	/* A unique specifier for the BigtableBackup resource in GCP. */
	// +optional
	ExternalRef *string `json:"externalRef,omitempty"`

	/* ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource. */
	// +optional
	ObservedGeneration *int64 `json:"observedGeneration,omitempty"`

	/* ObservedState is the state of the resource as most recently observed in GCP. */
	// +optional
	ObservedState *BackupObservedStateStatus `json:"observedState,omitempty"`
}

// +genclient
// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object
// +kubebuilder:resource:categories=gcp,shortName=gcpbigtablebackup;gcpbigtablebackups
// +kubebuilder:subresource:status
// +kubebuilder:metadata:labels="cnrm.cloud.google.com/managed-by-kcc=true"
// +kubebuilder:metadata:labels="cnrm.cloud.google.com/system=true"
// +kubebuilder:printcolumn:name="Age",JSONPath=".metadata.creationTimestamp",type="date"
// +kubebuilder:printcolumn:name="Ready",JSONPath=".status.conditions[?(@.type=='Ready')].status",type="string",description="When 'True', the most recent reconcile of the resource succeeded"
// +kubebuilder:printcolumn:name="Status",JSONPath=".status.conditions[?(@.type=='Ready')].reason",type="string",description="The reason for the value in 'Ready'"
// +kubebuilder:printcolumn:name="Status Age",JSONPath=".status.conditions[?(@.type=='Ready')].lastTransitionTime",type="date",description="The last transition time for the value in 'Status'"

// BigtableBackup is the Schema for the bigtable API
// +k8s:openapi-gen=true
type BigtableBackup struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`

	Spec   BigtableBackupSpec   `json:"spec,omitempty"`
	Status BigtableBackupStatus `json:"status,omitempty"`
}

// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object

// BigtableBackupList contains a list of BigtableBackup
type BigtableBackupList struct {
	metav1.TypeMeta `json:",inline"`
	metav1.ListMeta `json:"metadata,omitempty"`
	Items           []BigtableBackup `json:"items"`
}

func init() {
	SchemeBuilder.Register(&BigtableBackup{}, &BigtableBackupList{})
}
