// Copyright 2025 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// ----------------------------------------------------------------------------
//
//     ***     AUTO GENERATED CODE    ***    AUTO GENERATED CODE     ***
//
// ----------------------------------------------------------------------------
//
//     This file is automatically generated by Config Connector and manual
//     changes will be clobbered when the file is regenerated.
//
// ----------------------------------------------------------------------------

// *** DISCLAIMER ***
// Config Connector's go-client for CRDs is currently in ALPHA, which means
// that future versions of the go-client may include breaking changes.
// Please try it out and give us feedback!

package v1alpha1

import (
	"github.com/GoogleCloudPlatform/k8s-config-connector/pkg/clients/generated/apis/k8s/v1alpha1"
	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
)

type WorkflowsExecutionSpec struct {
	/* Input parameters of the execution represented as a JSON string.
	The size limit is 32KB.

	*Note*: If you are using the REST API directly to run your workflow, you
	must escape any JSON string value of `argument`. Example:
	`'{"argument":"{\"firstName\":\"FIRST\",\"lastName\":\"LAST\"}"}'` */
	// +optional
	Argument *string `json:"argument,omitempty"`

	/* The call logging level associated to this execution. */
	// +optional
	CallLogLevel *string `json:"callLogLevel,omitempty"`

	/* Labels associated with this execution. Labels can contain at most 64 entries. Keys and values can be no longer than 63 characters and can only contain lowercase letters, numeric characters, underscores, and dashes. Label keys must start with a letter. International characters are allowed. By default, labels are inherited from the workflow but are overridden by any labels associated with the execution. */
	// +optional
	Labels map[string]string `json:"labels,omitempty"`

	/* Required. The location of the application. */
	// +optional
	Location *string `json:"location,omitempty"`

	/* Required. The host project of the application. */
	// +optional
	ProjectRef *v1alpha1.ResourceRef `json:"projectRef,omitempty"`

	/* The WorkflowsExecution name. If not given, the metadata.name will be used. */
	// +optional
	ResourceID *string `json:"resourceID,omitempty"`

	/* Required. */
	// +optional
	WorkflowRef *v1alpha1.ResourceRef `json:"workflowRef,omitempty"`
}

type WorkflowsexecutionCurrentStepsStatus struct {
	/* Name of a routine within the workflow. */
	// +optional
	Routine *string `json:"routine,omitempty"`

	/* Name of a step within the routine. */
	// +optional
	Step *string `json:"step,omitempty"`
}

type WorkflowsexecutionElementsStatus struct {
	/* The source position information of the stack trace element. */
	// +optional
	Position *WorkflowsexecutionPositionStatus `json:"position,omitempty"`

	/* The routine where the error occurred. */
	// +optional
	Routine *string `json:"routine,omitempty"`

	/* The step the error occurred at. */
	// +optional
	Step *string `json:"step,omitempty"`
}

type WorkflowsexecutionErrorStatus struct {
	/* Human-readable stack trace string. */
	// +optional
	Context *string `json:"context,omitempty"`

	/* Error message and data returned represented as a JSON string. */
	// +optional
	Payload *string `json:"payload,omitempty"`

	/* Stack trace with detailed information of where error was generated. */
	// +optional
	StackTrace *WorkflowsexecutionStackTraceStatus `json:"stackTrace,omitempty"`
}

type WorkflowsexecutionObservedStateStatus struct {
	/* Output only. Measures the duration of the execution. */
	// +optional
	Duration *string `json:"duration,omitempty"`

	/* Output only. Marks the end of execution, successful or not. */
	// +optional
	EndTime *string `json:"endTime,omitempty"`

	/* Output only. The error which caused the execution to finish prematurely. The value is only present if the execution's state is `FAILED` or `CANCELLED`. */
	// +optional
	Error *WorkflowsexecutionErrorStatus `json:"error,omitempty"`

	/* Output only. Output of the execution represented as a JSON string. The value can only be present if the execution's state is `SUCCEEDED`. */
	// +optional
	Result *string `json:"result,omitempty"`

	/* Output only. Marks the beginning of execution. */
	// +optional
	StartTime *string `json:"startTime,omitempty"`

	/* Output only. Current state of the execution. */
	// +optional
	State *string `json:"state,omitempty"`

	/* Output only. Error regarding the state of the Execution resource. For example, this field will have error details if the execution data is unavailable due to revoked KMS key permissions. */
	// +optional
	StateError *WorkflowsexecutionStateErrorStatus `json:"stateError,omitempty"`

	/* Output only. Status tracks the current steps and progress data of this execution. */
	// +optional
	Status *WorkflowsexecutionStatusStatus `json:"status,omitempty"`

	/* Output only. Revision of the workflow this execution is using. */
	// +optional
	WorkflowRevisionID *string `json:"workflowRevisionID,omitempty"`
}

type WorkflowsexecutionPositionStatus struct {
	/* The source code column position (of the line) the current instruction was generated from. */
	// +optional
	Column *int64 `json:"column,omitempty"`

	/* The number of bytes of source code making up this stack trace element. */
	// +optional
	Length *int64 `json:"length,omitempty"`

	/* The source code line number the current instruction was generated from. */
	// +optional
	Line *int64 `json:"line,omitempty"`
}

type WorkflowsexecutionStackTraceStatus struct {
	/* An array of stack elements. */
	// +optional
	Elements []WorkflowsexecutionElementsStatus `json:"elements,omitempty"`
}

type WorkflowsexecutionStateErrorStatus struct {
	/* Provides specifics about the error. */
	// +optional
	Details *string `json:"details,omitempty"`

	/* The type of this state error. */
	// +optional
	Type *string `json:"type,omitempty"`
}

type WorkflowsexecutionStatusStatus struct {
	/* A list of currently executing or last executed step names for the workflow execution currently running. If the workflow has succeeded or failed, this is the last attempted or executed step. Presently, if the current step is inside a subworkflow, the list only includes that step. In the future, the list will contain items for each step in the call stack, starting with the outermost step in the `main` subworkflow, and ending with the most deeply nested step. */
	// +optional
	CurrentSteps []WorkflowsexecutionCurrentStepsStatus `json:"currentSteps,omitempty"`
}

type WorkflowsExecutionStatus struct {
	/* Conditions represent the latest available observations of the
	   WorkflowsExecution's current state. */
	Conditions []v1alpha1.Condition `json:"conditions,omitempty"`
	/* A unique specifier for the WorkflowsExecution resource in GCP. */
	// +optional
	ExternalRef *string `json:"externalRef,omitempty"`

	/* ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource. */
	// +optional
	ObservedGeneration *int64 `json:"observedGeneration,omitempty"`

	/* ObservedState is the state of the resource as most recently observed in GCP. */
	// +optional
	ObservedState *WorkflowsexecutionObservedStateStatus `json:"observedState,omitempty"`
}

// +genclient
// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object
// +kubebuilder:resource:categories=gcp,shortName=gcpworkflowsexecution;gcpworkflowsexecutions
// +kubebuilder:subresource:status
// +kubebuilder:metadata:labels="cnrm.cloud.google.com/managed-by-kcc=true";"cnrm.cloud.google.com/system=true"
// +kubebuilder:printcolumn:name="Age",JSONPath=".metadata.creationTimestamp",type="date"
// +kubebuilder:printcolumn:name="Ready",JSONPath=".status.conditions[?(@.type=='Ready')].status",type="string",description="When 'True', the most recent reconcile of the resource succeeded"
// +kubebuilder:printcolumn:name="Status",JSONPath=".status.conditions[?(@.type=='Ready')].reason",type="string",description="The reason for the value in 'Ready'"
// +kubebuilder:printcolumn:name="Status Age",JSONPath=".status.conditions[?(@.type=='Ready')].lastTransitionTime",type="date",description="The last transition time for the value in 'Status'"

// WorkflowsExecution is the Schema for the workflowexecutions API
// +k8s:openapi-gen=true
type WorkflowsExecution struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`

	Spec   WorkflowsExecutionSpec   `json:"spec,omitempty"`
	Status WorkflowsExecutionStatus `json:"status,omitempty"`
}

// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object

// WorkflowsExecutionList contains a list of WorkflowsExecution
type WorkflowsExecutionList struct {
	metav1.TypeMeta `json:",inline"`
	metav1.ListMeta `json:"metadata,omitempty"`
	Items           []WorkflowsExecution `json:"items"`
}

func init() {
	SchemeBuilder.Register(&WorkflowsExecution{}, &WorkflowsExecutionList{})
}
