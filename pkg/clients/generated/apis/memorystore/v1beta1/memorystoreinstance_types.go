// Copyright 2020 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//    http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

// ----------------------------------------------------------------------------
//
//     ***     AUTO GENERATED CODE    ***    AUTO GENERATED CODE     ***
//
// ----------------------------------------------------------------------------
//
//     This file is automatically generated by Config Connector and manual
//     changes will be clobbered when the file is regenerated.
//
// ----------------------------------------------------------------------------

// *** DISCLAIMER ***
// Config Connector's go-client for CRDs is currently in ALPHA, which means
// that future versions of the go-client may include breaking changes.
// Please try it out and give us feedback!

package v1beta1

import (
	"github.com/GoogleCloudPlatform/k8s-config-connector/pkg/clients/generated/apis/k8s/v1alpha1"
	apiextensionsv1 "k8s.io/apiextensions-apiserver/pkg/apis/apiextensions/v1"
	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
)

var _ = apiextensionsv1.JSON{}

type InstanceAofConfig struct {
	/* Optional. The fsync mode. */
	// +optional
	AppendFsync *string `json:"appendFsync,omitempty"`
}

type InstanceConnections struct {
	/* Detailed information of a PSC connection that is created through service connectivity automation. */
	// +optional
	PscAutoConnection *InstancePscAutoConnection `json:"pscAutoConnection,omitempty"`
}

type InstanceEndpoints struct {
	/* Optional. A group of PSC connections. They are created in the same VPC network, one for each service attachment in the cluster. */
	// +optional
	Connections []InstanceConnections `json:"connections,omitempty"`
}

type InstancePersistenceConfig struct {
	/* Optional. AOF configuration. This field will be ignored if mode is not AOF. */
	// +optional
	AofConfig *InstanceAofConfig `json:"aofConfig,omitempty"`

	/* Optional. Current persistence mode. */
	// +optional
	Mode *string `json:"mode,omitempty"`

	/* Optional. RDB configuration. This field will be ignored if mode is not RDB. */
	// +optional
	RdbConfig *InstanceRdbConfig `json:"rdbConfig,omitempty"`
}

type InstancePscAutoConnection struct {
	/* Required. The network where the PSC endpoints are created, in the form of projects/{project_id}/global/networks/{network_id}. */
	NetworkRef v1alpha1.ResourceRef `json:"networkRef"`

	/* Required. The consumer project_id where PSC connections are established. This should be the same project_id that the instance is being created in. */
	ProjectRef v1alpha1.ResourceRef `json:"projectRef"`
}

type InstanceRdbConfig struct {
	/* Optional. Period between RDB snapshots. */
	// +optional
	RdbSnapshotPeriod *string `json:"rdbSnapshotPeriod,omitempty"`

	/* Optional. Time that the first snapshot was/will be attempted, and to which future snapshots will be aligned. If not provided, the current time will be used. */
	// +optional
	RdbSnapshotStartTime *string `json:"rdbSnapshotStartTime,omitempty"`
}

type InstanceZoneDistributionConfig struct {
	/* Optional. Current zone distribution mode. Defaults to MULTI_ZONE. */
	// +optional
	Mode *string `json:"mode,omitempty"`

	/* Optional. Defines zone where all resources will be allocated with SINGLE_ZONE mode. Ignored for MULTI_ZONE mode. */
	// +optional
	Zone *string `json:"zone,omitempty"`
}

type MemorystoreInstanceSpec struct {
	/* Optional. Immutable. Authorization mode of the instance. */
	// +optional
	AuthorizationMode *string `json:"authorizationMode,omitempty"`

	/* Optional. If set to true deletion of the instance will fail. */
	// +optional
	DeletionProtectionEnabled *bool `json:"deletionProtectionEnabled,omitempty"`

	/* Optional. Endpoints for the instance. */
	// +optional
	Endpoints []InstanceEndpoints `json:"endpoints,omitempty"`

	/* Optional. User-provided engine configurations for the instance. */
	// +optional
	EngineConfigs map[string]string `json:"engineConfigs,omitempty"`

	/* Optional. Immutable. Engine version of the instance. */
	// +optional
	EngineVersion *string `json:"engineVersion,omitempty"`

	/* Optional. Labels to represent user-provided metadata. */
	// +optional
	Labels map[string]string `json:"labels,omitempty"`

	/* Immutable. */
	Location string `json:"location"`

	/* Optional. The mode config for the instance. */
	// +optional
	Mode *string `json:"mode,omitempty"`

	/* Optional. Immutable. Machine type for individual nodes of the instance. */
	// +optional
	NodeType *string `json:"nodeType,omitempty"`

	/* Optional. Persistence configuration of the instance. */
	// +optional
	PersistenceConfig *InstancePersistenceConfig `json:"persistenceConfig,omitempty"`

	/* The Project that this resource belongs to. */
	ProjectRef v1alpha1.ResourceRef `json:"projectRef"`

	/* Optional. Number of replica nodes per shard. If omitted the default is 0 replicas. */
	// +optional
	ReplicaCount *int32 `json:"replicaCount,omitempty"`

	/* The MemorystoreInstance name. If not given, the metadata.name will be used. */
	// +optional
	ResourceID *string `json:"resourceID,omitempty"`

	/* Optional. Number of shards for the instance. */
	// +optional
	ShardCount *int32 `json:"shardCount,omitempty"`

	/* Optional. Immutable. In-transit encryption mode of the instance. */
	// +optional
	TransitEncryptionMode *string `json:"transitEncryptionMode,omitempty"`

	/* Optional. Immutable. Zone distribution configuration of the instance for node allocation. */
	// +optional
	ZoneDistributionConfig *InstanceZoneDistributionConfig `json:"zoneDistributionConfig,omitempty"`
}

type InstanceConnectionsStatus struct {
	/* Detailed information of a PSC connection that is created through service connectivity automation. */
	// +optional
	PscAutoConnection *InstancePscAutoConnectionStatus `json:"pscAutoConnection,omitempty"`
}

type InstanceEndpointsStatus struct {
	/* Optional. A group of PSC connections. They are created in the same VPC network, one for each service attachment in the cluster. */
	// +optional
	Connections []InstanceConnectionsStatus `json:"connections,omitempty"`
}

type InstanceNodeConfigStatus struct {
	/* Output only. Memory size in GB of the node. */
	// +optional
	SizeGB *float64 `json:"sizeGB,omitempty"`
}

type InstanceObservedStateStatus struct {
	/* Output only. Creation timestamp of the instance. */
	// +optional
	CreateTime *string `json:"createTime,omitempty"`

	/* Optional. Endpoints for the instance. */
	// +optional
	Endpoints []InstanceEndpointsStatus `json:"endpoints,omitempty"`

	/* Output only. Configuration of individual nodes of the instance. */
	// +optional
	NodeConfig *InstanceNodeConfigStatus `json:"nodeConfig,omitempty"`

	/* Output only. Current state of the instance. */
	// +optional
	State *string `json:"state,omitempty"`

	/* Output only. Additional information about the state of the instance. */
	// +optional
	StateInfo *InstanceStateInfoStatus `json:"stateInfo,omitempty"`

	/* Output only. System assigned, unique identifier for the instance. */
	// +optional
	Uid *string `json:"uid,omitempty"`

	/* Output only. Latest update timestamp of the instance. */
	// +optional
	UpdateTime *string `json:"updateTime,omitempty"`
}

type InstancePscAutoConnectionStatus struct {
	/* Output only. Type of the PSC connection. */
	// +optional
	ConnectionType *string `json:"connectionType,omitempty"`

	/* Output only. The URI of the consumer side forwarding rule. Format: projects/{project}/regions/{region}/forwardingRules/{forwarding_rule} */
	// +optional
	ForwardingRule *string `json:"forwardingRule,omitempty"`

	/* Output only. The IP allocated on the consumer network for the PSC forwarding rule. */
	// +optional
	IpAddress *string `json:"ipAddress,omitempty"`

	/* Optional. Output only. port will only be set for Primary/Reader or Discovery endpoint. */
	// +optional
	Port *int32 `json:"port,omitempty"`

	/* Output only. The PSC connection id of the forwarding rule connected to the service attachment. */
	// +optional
	PscConnectionID *string `json:"pscConnectionID,omitempty"`

	/* Output only. The status of the PSC connection: whether a connection exists and ACTIVE or it no longer exists. Please note that this value is updated periodically. Please use Private Service Connect APIs for the latest status. */
	// +optional
	PscConnectionStatus *string `json:"pscConnectionStatus,omitempty"`

	/* Output only. The service attachment which is the target of the PSC connection, in the form of projects/{project-id}/regions/{region}/serviceAttachments/{service-attachment-id}. */
	// +optional
	ServiceAttachment *string `json:"serviceAttachment,omitempty"`
}

type InstanceStateInfoStatus struct {
	/* Output only. Describes ongoing update when instance state is UPDATING. */
	// +optional
	UpdateInfo *InstanceUpdateInfoStatus `json:"updateInfo,omitempty"`
}

type InstanceUpdateInfoStatus struct {
}

type MemorystoreInstanceStatus struct {
	/* Conditions represent the latest available observations of the
	   MemorystoreInstance's current state. */
	Conditions []v1alpha1.Condition `json:"conditions,omitempty"`
	/* A unique specifier for the MemorystoreInstance resource in GCP. */
	// +optional
	ExternalRef *string `json:"externalRef,omitempty"`

	/* ObservedGeneration is the generation of the resource that was most recently observed by the Config Connector controller. If this is equal to metadata.generation, then that means that the current reported status reflects the most recent desired state of the resource. */
	// +optional
	ObservedGeneration *int64 `json:"observedGeneration,omitempty"`

	/* ObservedState is the state of the resource as most recently observed in GCP. */
	// +optional
	ObservedState *InstanceObservedStateStatus `json:"observedState,omitempty"`
}

// +genclient
// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object
// +kubebuilder:resource:categories=gcp,shortName=gcpmemorystoreinstance;gcpmemorystoreinstances
// +kubebuilder:subresource:status
// +kubebuilder:metadata:labels="cnrm.cloud.google.com/managed-by-kcc=true"
// +kubebuilder:metadata:labels="cnrm.cloud.google.com/system=true"
// +kubebuilder:printcolumn:name="Age",JSONPath=".metadata.creationTimestamp",type="date"
// +kubebuilder:printcolumn:name="Ready",JSONPath=".status.conditions[?(@.type=='Ready')].status",type="string",description="When 'True', the most recent reconcile of the resource succeeded"
// +kubebuilder:printcolumn:name="Status",JSONPath=".status.conditions[?(@.type=='Ready')].reason",type="string",description="The reason for the value in 'Ready'"
// +kubebuilder:printcolumn:name="Status Age",JSONPath=".status.conditions[?(@.type=='Ready')].lastTransitionTime",type="date",description="The last transition time for the value in 'Status'"

// MemorystoreInstance is the Schema for the memorystore API
// +k8s:openapi-gen=true
type MemorystoreInstance struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`

	Spec   MemorystoreInstanceSpec   `json:"spec,omitempty"`
	Status MemorystoreInstanceStatus `json:"status,omitempty"`
}

// +k8s:deepcopy-gen:interfaces=k8s.io/apimachinery/pkg/runtime.Object

// MemorystoreInstanceList contains a list of MemorystoreInstance
type MemorystoreInstanceList struct {
	metav1.TypeMeta `json:",inline"`
	metav1.ListMeta `json:"metadata,omitempty"`
	Items           []MemorystoreInstance `json:"items"`
}

func init() {
	SchemeBuilder.Register(&MemorystoreInstance{}, &MemorystoreInstanceList{})
}
