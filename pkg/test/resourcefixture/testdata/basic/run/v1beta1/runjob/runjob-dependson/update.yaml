apiVersion: run.cnrm.cloud.google.com/v1beta1
kind: RunJob
metadata:
  name: runjob-dependson-${uniqueId}
  annotations:
    alpha.cnrm.cloud.google.com/reconciler: direct
spec:
  location: us-central1
  template:
    template:
      containers:
        - name: "hello"
          image: "us-docker.pkg.dev/cloudrun/container/hello"
          resources:
            limits:
              cpu: 1000m
              memory: 256Mi
          startupProbe:
            failureThreshold: 3
            httpGet:
              path: /
            periodSeconds: 10
            timeoutSeconds: 1
        - name: "goodbye"
          image: "us-docker.pkg.dev/cloudrun/container/hello"
          resources:
            limits:
              cpu: 1000m
              memory: 256Mi
          startupProbe:
            failureThreshold: 3
            httpGet:
              path: /
            periodSeconds: 10
            timeoutSeconds: 1
        - name: "farewell"
          image: "us-docker.pkg.dev/cloudrun/container/hello"
          resources:
            limits:
              cpu: 1000m
              memory: 256Mi
          startupProbe:
            failureThreshold: 3
            httpGet:
              path: /
            periodSeconds: 10
            timeoutSeconds: 1
          dependsOn:
            - "hello"
            - "goodbye"
