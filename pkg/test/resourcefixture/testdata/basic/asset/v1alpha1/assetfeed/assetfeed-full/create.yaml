apiVersion: asset.cnrm.cloud.google.com/v1alpha1
kind: AssetFeed
metadata:
  name: assetfeed-${uniqueId}
spec:
  projectRef:
    external: "${projectNumber}"
  assetNames:
    - "//compute.googleapis.com/projects/${projectId}/zones/us-central1-a/instances/instance1"
  assetTypes:
    - "compute.googleapis.com/Instance"
  contentType: "RELATIONSHIP"
  feedOutputConfig:
    pubsubDestination:
      topicRef:
        name: "kcc-assetfeed-${uniqueId}"
  condition:
    expression: "temporal_asset.deleted == false"
    title: "deleted"
    description: "deleted asset"
  relationshipTypes:
    - "INSTANCE_TO_INSTANCEGROUP"
