apiVersion: asset.cnrm.cloud.google.com/v1beta1
kind: AssetFeed
metadata:
  name: assetfeed-${uniqueId}
spec:
  projectRef:
    external: "${projectNumber}"
  assetNames:
    - "//compute.googleapis.com/projects/${projectId}/zones/us-central1-a/instances/instance1"
    - "//compute.googleapis.com/projects/${projectId}/zones/us-central1-a/images/image1" # updated
  assetTypes:
    - "compute.googleapis.com/Instance" 
    - "compute.googleapis.com/Image" # updated
  contentType: "RELATIONSHIP"
  feedOutputConfig:
    pubsubDestination:
      topicRef:
        name: "kcc-assetfeed-${uniqueId}"
  condition:
    expression: "temporal_asset.deleted == true"
    title: "deleted"
    description: "deleted asset"
    location: "us-central1"
  relationshipTypes:
    - "INSTANCE_TO_INSTANCEGROUP"
    - "COMPUTE_IMAGE_BOOT_DISK" # updated
