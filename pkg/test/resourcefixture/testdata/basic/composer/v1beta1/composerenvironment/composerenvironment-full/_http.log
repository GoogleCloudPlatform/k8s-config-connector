GET https://iam.googleapis.com/v1/projects/${projectId}/serviceAccounts/gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com?alt=json&prettyPrint=false
User-Agent: google-api-go-client/0.5 kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}

404 Not Found
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 404,
    "errors": [
      {
        "domain": "global",
        "message": "Unknown service account",
        "reason": "notFound"
      }
    ],
    "message": "Unknown service account",
    "status": "NOT_FOUND"
  }
}

---

POST https://iam.googleapis.com/v1/projects/${projectId}/serviceAccounts?alt=json&prettyPrint=false
Content-Type: application/json
User-Agent: google-api-go-client/0.5 kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}

{
  "accountId": "gsa-${uniqueId}",
  "serviceAccount": {
    "displayName": "Test GSA for composer environment"
  }
}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "displayName": "Test GSA for composer environment",
  "email": "gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com",
  "etag": "abcdef0123A=",
  "name": "projects/${projectId}/serviceAccounts/gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com",
  "oauth2ClientId": "888888888888888888888",
  "projectId": "${projectId}",
  "uniqueId": "111111111111111111111"
}

---

GET https://iam.googleapis.com/v1/projects/${projectId}/serviceAccounts/gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com?alt=json&prettyPrint=false
User-Agent: google-api-go-client/0.5 kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "displayName": "Test GSA for composer environment",
  "email": "gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com",
  "etag": "abcdef0123A=",
  "name": "projects/${projectId}/serviceAccounts/gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com",
  "oauth2ClientId": "888888888888888888888",
  "projectId": "${projectId}",
  "uniqueId": "111111111111111111111"
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

404 Not Found
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 404,
    "errors": [
      {
        "domain": "global",
        "message": "environment \"projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}\" not found",
        "reason": "notFound"
      }
    ],
    "message": "environment \"projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}\" not found",
    "status": "NOT_FOUND"
  }
}

---

POST https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: parent=projects%2F${projectId}%2Flocations%2Fus-central1

{
  "config": {
    "environmentSize": 1,
    "nodeConfig": {
      "composerInternalIpv4CidrBlock": "100.64.128.0/20"
    },
    "privateEnvironmentConfig": {
      "enablePrivateBuildsOnly": true,
      "enablePrivateEnvironment": true
    },
    "softwareConfig": {
      "airflowConfigOverrides": {
        "webserver-rbac_user_registration_role": "Viewer"
      },
      "imageVersion": "composer-3-airflow-2.10.5-build.11",
      "webServerPluginsMode": 2
    }
  },
  "labels": {
    "cnrm-test": "true",
    "managed-by-cnrm": "true"
  },
  "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}"
}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "operationType": 1,
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "test-uuid",
    "state": 1
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}"
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/operations/${operationID}
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Foperations%2F${operationID}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "done": true,
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "endTime": "2024-04-01T12:34:56.123456Z",
    "operationType": "CREATE",
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "test-uuid",
    "state": "SUCCEEDED"
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}",
  "response": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.Environment",
    "config": {
      "airflowUri": "https://{uuid}-dot-{location}.composer.googleusercontent.com",
      "dagGcsPrefix": "gs://us-central1-composerenviron-{uniqueId}-bucket/dags",
      "dataRetentionConfig": {
        "airflowMetadataRetentionConfig": {
          "retentionMode": "RETENTION_MODE_DISABLED"
        },
        "taskLogsRetentionConfig": {
          "storageMode": "CLOUD_LOGGING_ONLY"
        }
      },
      "databaseConfig": {
        "machineType": "db-custom-2-7680"
      },
      "encryptionConfig": {},
      "environmentSize": "ENVIRONMENT_SIZE_SMALL",
      "maintenanceWindow": {
        "endTime": "1970-01-01T04:00:00Z",
        "recurrence": "FREQ=WEEKLY;BYDAY=FR,SA,SU",
        "startTime": "1970-01-01T00:00:00Z"
      },
      "nodeConfig": {
        "composerInternalIpv4CidrBlock": "100.64.128.0/20",
        "ipAllocationPolicy": {
          "useIpAliases": true
        },
        "network": "projects/${projectId}/global/networks/default",
        "serviceAccount": "${projectNumber}-compute@developer.gserviceaccount.com"
      },
      "privateEnvironmentConfig": {
        "cloudComposerNetworkIpv4CidrBlock": "172.31.245.0/24",
        "cloudSqlIpv4CidrBlock": "10.0.0.0/12",
        "enablePrivateBuildsOnly": true,
        "enablePrivateEnvironment": true,
        "privateClusterConfig": {}
      },
      "softwareConfig": {
        "airflowConfigOverrides": {
          "webserver-rbac_user_registration_role": "Viewer"
        },
        "cloudDataLineageIntegration": {},
        "imageVersion": "composer-3-airflow-2.10.5-build.11",
        "pythonVersion": "3",
        "webServerPluginsMode": "PLUGINS_ENABLED"
      },
      "webServerNetworkAccessControl": {
        "allowedIpRanges": [
          {
            "description": "Allows access from all IPv4 addresses (default value)",
            "value": "0.0.0.0/0"
          },
          {
            "description": "Allows access from all IPv6 addresses (default value)",
            "value": "::0/0"
          }
        ]
      },
      "workloadsConfig": {
        "scheduler": {
          "count": 1,
          "cpu": 0.5,
          "memoryGb": 2,
          "storageGb": 1
        },
        "webServer": {
          "cpu": 0.5,
          "memoryGb": 2,
          "storageGb": 1
        },
        "worker": {
          "cpu": 0.5,
          "maxCount": 3,
          "memoryGb": 2,
          "minCount": 1,
          "storageGb": 1
        }
      }
    },
    "createTime": "2024-04-01T12:34:56.123456Z",
    "labels": {
      "cnrm-test": "true",
      "managed-by-cnrm": "true"
    },
    "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "storageConfig": {
      "bucket": "us-central1-test-123456-asdfg-bucket"
    },
    "updateTime": "2024-04-01T12:34:56.123456Z",
    "uuid": "test-uuid"
  }
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "config": {
    "airflowUri": "https://{uuid}-dot-{location}.composer.googleusercontent.com",
    "dagGcsPrefix": "gs://us-central1-composerenviron-{uniqueId}-bucket/dags",
    "dataRetentionConfig": {
      "airflowMetadataRetentionConfig": {
        "retentionMode": 2
      },
      "taskLogsRetentionConfig": {
        "storageMode": 2
      }
    },
    "databaseConfig": {},
    "encryptionConfig": {},
    "environmentSize": 1,
    "maintenanceWindow": {
      "endTime": "1970-01-01T04:00:00Z",
      "recurrence": "FREQ=WEEKLY;BYDAY=FR,SA,SU",
      "startTime": "1970-01-01T00:00:00Z"
    },
    "nodeConfig": {
      "composerInternalIpv4CidrBlock": "100.64.128.0/20",
      "ipAllocationPolicy": {},
      "network": "projects/${projectId}/global/networks/default",
      "serviceAccount": "${projectNumber}-compute@developer.gserviceaccount.com"
    },
    "privateEnvironmentConfig": {
      "cloudComposerNetworkIpv4CidrBlock": "172.31.245.0/24",
      "cloudSqlIpv4CidrBlock": "10.0.0.0/12",
      "enablePrivateBuildsOnly": true,
      "enablePrivateEnvironment": true,
      "privateClusterConfig": {}
    },
    "softwareConfig": {
      "airflowConfigOverrides": {
        "webserver-rbac_user_registration_role": "Viewer"
      },
      "cloudDataLineageIntegration": {},
      "imageVersion": "composer-3-airflow-2.10.5-build.11",
      "webServerPluginsMode": 2
    },
    "webServerNetworkAccessControl": {
      "allowedIpRanges": [
        {
          "description": "Allows access from all IPv4 addresses (default value)",
          "value": "0.0.0.0/0"
        },
        {
          "description": "Allows access from all IPv6 addresses (default value)",
          "value": "::0/0"
        }
      ]
    },
    "workloadsConfig": {
      "scheduler": {
        "count": 1,
        "cpu": 0.5,
        "memoryGb": 2,
        "storageGb": 1
      },
      "webServer": {
        "cpu": 0.5,
        "memoryGb": 2,
        "storageGb": 1
      },
      "worker": {
        "cpu": 0.5,
        "maxCount": 3,
        "memoryGb": 2,
        "minCount": 1,
        "storageGb": 1
      }
    }
  },
  "createTime": "2024-04-01T12:34:56.123456Z",
  "labels": {
    "cnrm-test": "true",
    "managed-by-cnrm": "true"
  },
  "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
  "storageConfig": {
    "bucket": "us-central1-test-123456-asdfg-bucket"
  },
  "updateTime": "2024-04-01T12:34:56.123456Z",
  "uuid": "test-uuid"
}

---

PATCH https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint&updateMask=config.environmentSize%2Cconfig.nodeConfig.network%2Cconfig.nodeConfig.serviceAccount%2Cconfig.privateEnvironmentConfig.cloudComposerNetworkIpv4CidrBlock%2Cconfig.privateEnvironmentConfig.cloudSqlIpv4CidrBlock%2Cconfig.privateEnvironmentConfig.enablePrivateBuildsOnly%2Cconfig.privateEnvironmentConfig.enablePrivateEnvironment%2Cconfig.softwareConfig.imageVersion
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

{
  "config": {
    "airflowUri": "https://{uuid}-dot-{location}.composer.googleusercontent.com",
    "dagGcsPrefix": "gs://us-central1-composerenviron-{uniqueId}-bucket/dags",
    "dataRetentionConfig": {
      "airflowMetadataRetentionConfig": {
        "retentionMode": 2
      },
      "taskLogsRetentionConfig": {
        "storageMode": 2
      }
    },
    "environmentSize": 3,
    "maintenanceWindow": {
      "endTime": "1970-01-01T04:00:00Z",
      "recurrence": "FREQ=WEEKLY;BYDAY=FR,SA,SU",
      "startTime": "1970-01-01T00:00:00Z"
    },
    "nodeConfig": {
      "composerInternalIpv4CidrBlock": "100.64.128.0/20"
    },
    "privateEnvironmentConfig": {
      "privateClusterConfig": {}
    },
    "softwareConfig": {
      "airflowConfigOverrides": {
        "webserver-rbac_user_registration_role": "Viewer"
      },
      "cloudDataLineageIntegration": {},
      "imageVersion": "composer-3-airflow-2.10.5-build.19",
      "webServerPluginsMode": 2
    },
    "webServerNetworkAccessControl": {
      "allowedIpRanges": [
        {
          "description": "Allows access from all IPv4 addresses (default value)",
          "value": "0.0.0.0/0"
        },
        {
          "description": "Allows access from all IPv6 addresses (default value)",
          "value": "::0/0"
        }
      ]
    },
    "workloadsConfig": {
      "scheduler": {
        "count": 1,
        "cpu": 0.5,
        "memoryGb": 2,
        "storageGb": 1
      },
      "webServer": {
        "cpu": 0.5,
        "memoryGb": 2,
        "storageGb": 1
      },
      "worker": {
        "cpu": 0.5,
        "maxCount": 3,
        "memoryGb": 2,
        "minCount": 1,
        "storageGb": 1
      }
    }
  },
  "createTime": "2024-04-01T12:34:56.123456Z",
  "labels": {
    "cnrm-test": "true",
    "managed-by-cnrm": "true"
  },
  "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
  "storageConfig": {
    "bucket": "us-central1-test-123456-asdfg-bucket"
  },
  "updateTime": "2024-04-01T12:34:56.123456Z",
  "uuid": "test-uuid"
}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "operationType": 3,
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "test-uuid",
    "state": 1
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}"
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/operations/${operationID}
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Foperations%2F${operationID}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "done": true,
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "endTime": "2024-04-01T12:34:56.123456Z",
    "operationType": "UPDATE",
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "test-uuid",
    "state": "SUCCEEDED"
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}",
  "response": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.Environment",
    "config": {
      "airflowUri": "https://{uuid}-dot-{location}.composer.googleusercontent.com",
      "dagGcsPrefix": "gs://us-central1-composerenviron-{uniqueId}-bucket/dags",
      "dataRetentionConfig": {
        "airflowMetadataRetentionConfig": {
          "retentionMode": "RETENTION_MODE_DISABLED"
        },
        "taskLogsRetentionConfig": {
          "storageMode": "CLOUD_LOGGING_ONLY"
        }
      },
      "databaseConfig": {
        "machineType": "db-custom-2-7680"
      },
      "encryptionConfig": {},
      "environmentSize": "ENVIRONMENT_SIZE_SMALL",
      "maintenanceWindow": {
        "endTime": "1970-01-01T04:00:00Z",
        "recurrence": "FREQ=WEEKLY;BYDAY=FR,SA,SU",
        "startTime": "1970-01-01T00:00:00Z"
      },
      "nodeConfig": {
        "composerInternalIpv4CidrBlock": "100.64.128.0/20",
        "ipAllocationPolicy": {
          "useIpAliases": true
        },
        "network": "projects/${projectId}/global/networks/default",
        "serviceAccount": "${projectNumber}-compute@developer.gserviceaccount.com"
      },
      "privateEnvironmentConfig": {
        "cloudComposerNetworkIpv4CidrBlock": "172.31.245.0/24",
        "cloudSqlIpv4CidrBlock": "10.0.0.0/12",
        "enablePrivateBuildsOnly": true,
        "enablePrivateEnvironment": true,
        "privateClusterConfig": {}
      },
      "softwareConfig": {
        "airflowConfigOverrides": {
          "webserver-rbac_user_registration_role": "Viewer"
        },
        "cloudDataLineageIntegration": {},
        "imageVersion": "composer-3-airflow-2.10.5-build.11",
        "pythonVersion": "3",
        "webServerPluginsMode": "PLUGINS_ENABLED"
      },
      "webServerNetworkAccessControl": {
        "allowedIpRanges": [
          {
            "description": "Allows access from all IPv4 addresses (default value)",
            "value": "0.0.0.0/0"
          },
          {
            "description": "Allows access from all IPv6 addresses (default value)",
            "value": "::0/0"
          }
        ]
      },
      "workloadsConfig": {
        "scheduler": {
          "count": 1,
          "cpu": 0.5,
          "memoryGb": 2,
          "storageGb": 1
        },
        "webServer": {
          "cpu": 0.5,
          "memoryGb": 2,
          "storageGb": 1
        },
        "worker": {
          "cpu": 0.5,
          "maxCount": 3,
          "memoryGb": 2,
          "minCount": 1,
          "storageGb": 1
        }
      }
    },
    "createTime": "2024-04-01T12:34:56.123456Z",
    "labels": {
      "cnrm-test": "true",
      "managed-by-cnrm": "true"
    },
    "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "storageConfig": {
      "bucket": "us-central1-test-123456-asdfg-bucket"
    },
    "updateTime": "2024-04-01T12:34:56.123456Z",
    "uuid": "test-uuid"
  }
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "config": {
    "airflowUri": "https://{uuid}-dot-{location}.composer.googleusercontent.com",
    "dagGcsPrefix": "gs://us-central1-composerenviron-{uniqueId}-bucket/dags",
    "dataRetentionConfig": {
      "airflowMetadataRetentionConfig": {
        "retentionMode": 2
      },
      "taskLogsRetentionConfig": {
        "storageMode": 2
      }
    },
    "databaseConfig": {},
    "encryptionConfig": {},
    "environmentSize": 1,
    "maintenanceWindow": {
      "endTime": "1970-01-01T04:00:00Z",
      "recurrence": "FREQ=WEEKLY;BYDAY=FR,SA,SU",
      "startTime": "1970-01-01T00:00:00Z"
    },
    "nodeConfig": {
      "composerInternalIpv4CidrBlock": "100.64.128.0/20",
      "ipAllocationPolicy": {},
      "network": "projects/${projectId}/global/networks/default",
      "serviceAccount": "${projectNumber}-compute@developer.gserviceaccount.com"
    },
    "privateEnvironmentConfig": {
      "cloudComposerNetworkIpv4CidrBlock": "172.31.245.0/24",
      "cloudSqlIpv4CidrBlock": "10.0.0.0/12",
      "enablePrivateBuildsOnly": true,
      "enablePrivateEnvironment": true,
      "privateClusterConfig": {}
    },
    "softwareConfig": {
      "airflowConfigOverrides": {
        "webserver-rbac_user_registration_role": "Viewer"
      },
      "cloudDataLineageIntegration": {},
      "imageVersion": "composer-3-airflow-2.10.5-build.11",
      "webServerPluginsMode": 2
    },
    "webServerNetworkAccessControl": {
      "allowedIpRanges": [
        {
          "description": "Allows access from all IPv4 addresses (default value)",
          "value": "0.0.0.0/0"
        },
        {
          "description": "Allows access from all IPv6 addresses (default value)",
          "value": "::0/0"
        }
      ]
    },
    "workloadsConfig": {
      "scheduler": {
        "count": 1,
        "cpu": 0.5,
        "memoryGb": 2,
        "storageGb": 1
      },
      "webServer": {
        "cpu": 0.5,
        "memoryGb": 2,
        "storageGb": 1
      },
      "worker": {
        "cpu": 0.5,
        "maxCount": 3,
        "memoryGb": 2,
        "minCount": 1,
        "storageGb": 1
      }
    }
  },
  "createTime": "2024-04-01T12:34:56.123456Z",
  "labels": {
    "cnrm-test": "true",
    "managed-by-cnrm": "true"
  },
  "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
  "storageConfig": {
    "bucket": "us-central1-test-123456-asdfg-bucket"
  },
  "updateTime": "2024-04-01T12:34:56.123456Z",
  "uuid": "test-uuid"
}

---

DELETE https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "operationType": 2,
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "state": 1
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}"
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/operations/${operationID}
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Foperations%2F${operationID}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "done": true,
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "endTime": "2024-04-01T12:34:56.123456Z",
    "operationType": "DELETE",
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "state": "SUCCEEDED"
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}",
  "response": {
    "@type": "type.googleapis.com/google.protobuf.Empty"
  }
}

---

GET https://iam.googleapis.com/v1/projects/${projectId}/serviceAccounts/gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com?alt=json&prettyPrint=false
User-Agent: google-api-go-client/0.5 kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "displayName": "Test GSA for composer environment",
  "email": "gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com",
  "etag": "abcdef0123A=",
  "name": "projects/${projectId}/serviceAccounts/gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com",
  "oauth2ClientId": "888888888888888888888",
  "projectId": "${projectId}",
  "uniqueId": "111111111111111111111"
}

---

DELETE https://iam.googleapis.com/v1/projects/${projectId}/serviceAccounts/gsa-${uniqueId}@${projectId}.iam.gserviceaccount.com?alt=json&prettyPrint=false
User-Agent: google-api-go-client/0.5 kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{}