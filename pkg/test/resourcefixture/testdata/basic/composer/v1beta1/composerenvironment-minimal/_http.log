GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

404 Not Found
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "error": {
    "code": 404,
    "message": "No such environment found: projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "status": "NOT_FOUND"
  }
}

---

POST https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: parent=projects%2F${projectId}%2Flocations%2Fus-central1

{
  "config": {
    "nodeConfig": {
      "serviceAccount": "porch-sync@${projectId}.iam.gserviceaccount.com"
    }
  },
  "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}"
}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "operationType": 1,
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "4ac8607a-fe43-4bb7-bfba-2fb3f9355af5",
    "state": 1
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}"
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/operations/${operationID}
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Foperations%2F${operationID}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "done": true,
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "endTime": "2024-04-01T12:34:56.123456Z",
    "operationType": "CREATE",
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "4ac8607a-fe43-4bb7-bfba-2fb3f9355af5",
    "state": "SUCCEEDED"
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}",
  "response": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.Environment",
    "config": {
      "airflowByoidUri": "https://4ac8607afe434bb7bfba2fb3f9355af5-dot-us-central1.composer.byoid.googleusercontent.com",
      "airflowUri": "https://{uuid}-dot-{location}.composer.googleusercontent.com",
      "dagGcsPrefix": "gs://us-central1-composerenviron-0ba0c4df-bucket/dags",
      "dataRetentionConfig": {
        "airflowMetadataRetentionConfig": {
          "retentionDays": 60,
          "retentionMode": "RETENTION_MODE_ENABLED"
        }
      },
      "encryptionConfig": {},
      "environmentSize": "ENVIRONMENT_SIZE_SMALL",
      "nodeConfig": {
        "composerInternalIpv4CidrBlock": "100.64.128.0/20",
        "ipAllocationPolicy": {},
        "serviceAccount": "porch-sync@${projectId}.iam.gserviceaccount.com"
      },
      "privateEnvironmentConfig": {
        "networkingConfig": {}
      },
      "softwareConfig": {
        "cloudDataLineageIntegration": {},
        "imageVersion": "composer-3-airflow-2.10.5-build.19",
        "webServerPluginsMode": "PLUGINS_ENABLED"
      },
      "webServerNetworkAccessControl": {
        "allowedIpRanges": [
          {
            "description": "Allows access from all IPv4 addresses (default value)",
            "value": "0.0.0.0/0"
          },
          {
            "description": "Allows access from all IPv6 addresses (default value)",
            "value": "::0/0"
          }
        ]
      },
      "workloadsConfig": {
        "dagProcessor": {
          "count": 1,
          "cpu": 1,
          "memoryGb": 4,
          "storageGb": 1
        },
        "scheduler": {
          "count": 1,
          "cpu": 0.5,
          "memoryGb": 2,
          "storageGb": 1
        },
        "triggerer": {
          "count": 1,
          "cpu": 0.5,
          "memoryGb": 1
        },
        "webServer": {
          "cpu": 1,
          "memoryGb": 4,
          "storageGb": 1
        },
        "worker": {
          "cpu": 0.5,
          "maxCount": 3,
          "memoryGb": 2,
          "minCount": 1,
          "storageGb": 10
        }
      }
    },
    "createTime": "2024-04-01T12:34:56.123456Z",
    "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "storageConfig": {
      "bucket": "us-central1-composerenviron-0ba0c4df-bucket"
    },
    "updateTime": "2024-04-01T12:34:56.123456Z",
    "uuid": "4ac8607a-fe43-4bb7-bfba-2fb3f9355af5"
  }
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "config": {
    "airflowByoidUri": "https://4ac8607afe434bb7bfba2fb3f9355af5-dot-us-central1.composer.byoid.googleusercontent.com",
    "airflowUri": "https://{uuid}-dot-{location}.composer.googleusercontent.com",
    "dagGcsPrefix": "gs://us-central1-composerenviron-0ba0c4df-bucket/dags",
    "dataRetentionConfig": {
      "airflowMetadataRetentionConfig": {
        "retentionDays": 60,
        "retentionMode": 1
      }
    },
    "encryptionConfig": {},
    "environmentSize": 1,
    "nodeConfig": {
      "composerInternalIpv4CidrBlock": "100.64.128.0/20",
      "ipAllocationPolicy": {},
      "serviceAccount": "porch-sync@${projectId}.iam.gserviceaccount.com"
    },
    "privateEnvironmentConfig": {
      "networkingConfig": {}
    },
    "softwareConfig": {
      "cloudDataLineageIntegration": {},
      "imageVersion": "composer-3-airflow-2.10.5-build.19",
      "webServerPluginsMode": 2
    },
    "webServerNetworkAccessControl": {
      "allowedIpRanges": [
        {
          "description": "Allows access from all IPv4 addresses (default value)",
          "value": "0.0.0.0/0"
        },
        {
          "description": "Allows access from all IPv6 addresses (default value)",
          "value": "::0/0"
        }
      ]
    },
    "workloadsConfig": {
      "dagProcessor": {
        "count": 1,
        "cpu": 1,
        "memoryGb": 4,
        "storageGb": 1
      },
      "scheduler": {
        "count": 1,
        "cpu": 0.5,
        "memoryGb": 2,
        "storageGb": 1
      },
      "triggerer": {
        "count": 1,
        "cpu": 0.5,
        "memoryGb": 1
      },
      "webServer": {
        "cpu": 1,
        "memoryGb": 4,
        "storageGb": 1
      },
      "worker": {
        "cpu": 0.5,
        "maxCount": 3,
        "memoryGb": 2,
        "minCount": 1,
        "storageGb": 10
      }
    }
  },
  "createTime": "2024-04-01T12:34:56.123456Z",
  "name": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
  "state": 2,
  "storageConfig": {
    "bucket": "us-central1-composerenviron-0ba0c4df-bucket"
  },
  "updateTime": "2024-04-01T12:34:56.123456Z",
  "uuid": "4ac8607a-fe43-4bb7-bfba-2fb3f9355af5"
}

---

DELETE https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}?%24alt=json%3Benum-encoding%3Dint
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Fenvironments%2Fcomposerenvironment-${uniqueId}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "operationType": 2,
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "4ac8607a-fe43-4bb7-bfba-2fb3f9355af5",
    "state": 1
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}"
}

---

GET https://composer.googleapis.com/v1/projects/${projectId}/locations/us-central1/operations/${operationID}
Content-Type: application/json
User-Agent: kcc/${kccVersion} (+https://github.com/GoogleCloudPlatform/k8s-config-connector) kcc/controller-manager/${kccVersion}
X-Goog-Request-Params: name=projects%2F${projectId}%2Flocations%2Fus-central1%2Foperations%2F${operationID}

200 OK
Content-Type: application/json; charset=UTF-8
Server: ESF
Vary: Origin
Vary: X-Origin
Vary: Referer
X-Content-Type-Options: nosniff
X-Frame-Options: SAMEORIGIN
X-Xss-Protection: 0

{
  "done": true,
  "metadata": {
    "@type": "type.googleapis.com/google.cloud.orchestration.airflow.service.v1.OperationMetadata",
    "createTime": "2024-04-01T12:34:56.123456Z",
    "endTime": "2024-04-01T12:34:56.123456Z",
    "operationType": "DELETE",
    "resource": "projects/${projectId}/locations/us-central1/environments/composerenvironment-${uniqueId}",
    "resourceUuid": "4ac8607a-fe43-4bb7-bfba-2fb3f9355af5",
    "state": "SUCCEEDED"
  },
  "name": "projects/${projectId}/locations/us-central1/operations/${operationID}",
  "response": {
    "@type": "type.googleapis.com/google.protobuf.Empty"
  }
}